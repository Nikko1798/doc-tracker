import{_ as $e,a as Fe}from"./Layout.vue_vue_type_script_setup_true_lang-DxuSpVmp.js";import{_ as De,a as qe}from"./index-fFvEen2a.js";import{_ as Se,E as Ee}from"./AlertDescription.vue_vue_type_script_setup_true_lang-D8IHNJTk.js";import{c as O}from"./createLucideIcon-6w7ufGYs.js";import{d as F,f as p,u as t,v as R,w as s,g as Q,q as ce,s as fe,o as a,a as o,k as me,b as l,c,H as Y,i as Z,e as y,z as B,F as S,G as L,r as M,Y as pe,j as Te,A as Ae,x as U,E as ye,Z as Me,_ as Oe,L as Re,D as je,h as Be}from"./app-DI_r0fHf.js";import{_ as A}from"./index-4UkQSTfh.js";import{c as Qe,a as ze,_ as Ve,b as Pe}from"./CardTitle.vue_vue_type_script_setup_true_lang-D3HAofcw.js";import{c as I}from"./utils-kKsk6u8f.js";import{q as E}from"./index-CMWG4mbA.js";import{l as Le,_ as Ie,a as He,b as Ke}from"./index-DvBKE3ik.js";import{_ as Ne}from"./InputError.vue_vue_type_script_setup_true_lang-DIyMAznW.js";import{u as he,a as ge}from"./useForwardPropsEmits-BaqzfTMZ.js";import{D as Ue,c as We,d as Ge,e as Je,f as Xe,X as Ye}from"./SheetHeader.vue_vue_type_script_setup_true_lang-pWJ6Anb0.js";import{r as W,g as Ze}from"./index-g211oSwf.js";import{D as et,a as tt,_ as ot}from"./AppLayout.vue_vue_type_script_setup_true_lang-D5sfQrvS.js";import{_ as ie}from"./Spinner.vue_vue_type_script_setup_true_lang-D-xX5JJI.js";import{C as at}from"./check-D4pEpVL_.js";import{_ as ue}from"./Badge.vue_vue_type_script_setup_true_lang-Bgg5Ol0J.js";import"./index-ikzcNs2d.js";import"./useForwardExpose-622DdgcY.js";import"./VisuallyHidden-B_T-SoNZ.js";import"./chevrons-up-down-Bm0xQcg1.js";import"./RovingFocusGroup-CuIWC2JV.js";import"./loader-circle-Ci3LUajU.js";const st=O("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const rt=O("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const lt=O("EyeOffIcon",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const nt=O("LockKeyholeIcon",[["circle",{cx:"12",cy:"16",r:"1",key:"1au0dj"}],["rect",{x:"3",y:"10",width:"18",height:"12",rx:"2",key:"6s8ecr"}],["path",{d:"M7 10V7a5 5 0 0 1 10 0v3",key:"1pqi11"}]]);const it=O("RefreshCwIcon",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const ut=O("ScanLineIcon",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);const dt=O("ShieldBanIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m4.243 5.21 14.39 12.472",key:"1c9a7c"}]]);const de=O("ShieldCheckIcon",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ct=F({__name:"Dialog",props:{open:{type:Boolean},defaultOpen:{type:Boolean},modal:{type:Boolean}},emits:["update:open"],setup(e,{emit:r}){const u=he(e,r);return(h,n)=>(a(),p(t(Ue),R({"data-slot":"dialog"},t(u)),{default:s(f=>[Q(h.$slots,"default",ce(fe(f)))]),_:3},16))}}),ft=F({__name:"DialogOverlay",props:{forceMount:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(e){const r=e,i=W(r,"class");return(d,u)=>(a(),p(t(We),R({"data-slot":"dialog-overlay"},t(i),{class:t(I)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/80",r.class)}),{default:s(()=>[Q(d.$slots,"default")]),_:3},16,["class"]))}}),mt=F({inheritAttrs:!1,__name:"DialogContent",props:{forceMount:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{},showCloseButton:{type:Boolean,default:!0}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(e,{emit:r}){const i=e,d=r,u=W(i,"class"),h=he(u,d);return(n,f)=>(a(),p(t(Ge),null,{default:s(()=>[o(ft),o(t(Je),R({"data-slot":"dialog-content"},{...n.$attrs,...t(h)},{class:t(I)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",i.class)}),{default:s(()=>[Q(n.$slots,"default"),e.showCloseButton?(a(),p(t(Xe),{key:0,"data-slot":"dialog-close",class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4"},{default:s(()=>[o(t(Ye)),f[0]||(f[0]=l("span",{class:"sr-only"},"Close",-1))]),_:1})):me("",!0)]),_:3},16,["class"])]),_:3}))}}),pt=F({__name:"DialogDescription",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const r=e,i=W(r,"class"),d=ge(i);return(u,h)=>(a(),p(t(et),R({"data-slot":"dialog-description"},t(d),{class:t(I)("text-muted-foreground text-sm",r.class)}),{default:s(()=>[Q(u.$slots,"default")]),_:3},16,["class"]))}}),yt=F({__name:"DialogHeader",props:{class:{}},setup(e){const r=e;return(i,d)=>(a(),c("div",{"data-slot":"dialog-header",class:Y(t(I)("flex flex-col gap-2 text-center sm:text-left",r.class))},[Q(i.$slots,"default")],2))}}),ht=F({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(e){const r=e,i=W(r,"class"),d=ge(i);return(u,h)=>(a(),p(t(tt),R({"data-slot":"dialog-title"},t(d),{class:t(I)("text-lg leading-none font-semibold",r.class)}),{default:s(()=>[Q(u.$slots,"default")]),_:3},16,["class"]))}}),gt=F({__name:"CardDescription",props:{class:{}},setup(e){const r=e;return(i,d)=>(a(),c("p",{"data-slot":"card-description",class:Y(t(I)("text-muted-foreground text-sm",r.class))},[Q(i.$slots,"default")],2))}}),vt={class:"list-inside list-disc text-sm"},ve=F({__name:"AlertError",props:{errors:{},title:{default:"Something went wrong."}},setup(e){const r=e,i=Z(()=>Array.from(new Set(r.errors)));return(d,u)=>(a(),p(t(De),{variant:"destructive"},{default:s(()=>[o(t(st),{class:"size-4"}),o(t(qe),null,{default:s(()=>[y(B(e.title),1)]),_:1}),o(t(Se),null,{default:s(()=>[l("ul",vt,[(a(!0),c(S,null,L(i.value,(h,n)=>(a(),c("li",{key:n},B(h),1))),128))])]),_:1})]),_:1}))}}),w=e=>({url:w.url(e),method:"get"});w.definition={methods:["get","head"],url:"/two-factor-challenge"};w.url=e=>w.definition.url+E(e);w.get=e=>({url:w.url(e),method:"get"});w.head=e=>({url:w.url(e),method:"head"});const ee=e=>({action:w.url(e),method:"get"});ee.get=e=>({action:w.url(e),method:"get"});ee.head=e=>({action:w.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});w.form=ee;const x=e=>({url:x.url(e),method:"post"});x.definition={methods:["post"],url:"/user/two-factor-authentication"};x.url=e=>x.definition.url+E(e);x.post=e=>({url:x.url(e),method:"post"});const _e=e=>({action:x.url(e),method:"post"});_e.post=e=>({action:x.url(e),method:"post"});x.form=_e;const k=e=>({url:k.url(e),method:"post"});k.definition={methods:["post"],url:"/user/confirmed-two-factor-authentication"};k.url=e=>k.definition.url+E(e);k.post=e=>({url:k.url(e),method:"post"});const be=e=>({action:k.url(e),method:"post"});be.post=e=>({action:k.url(e),method:"post"});k.form=be;const C=e=>({url:C.url(e),method:"delete"});C.definition={methods:["delete"],url:"/user/two-factor-authentication"};C.url=e=>C.definition.url+E(e);C.delete=e=>({url:C.url(e),method:"delete"});const we=e=>({action:C.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});we.delete=e=>({action:C.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"DELETE",...e?.query??e?.mergeQuery??{}}}),method:"post"});C.form=we;const g=e=>({url:g.url(e),method:"get"});g.definition={methods:["get","head"],url:"/user/two-factor-qr-code"};g.url=e=>g.definition.url+E(e);g.get=e=>({url:g.url(e),method:"get"});g.head=e=>({url:g.url(e),method:"head"});const te=e=>({action:g.url(e),method:"get"});te.get=e=>({action:g.url(e),method:"get"});te.head=e=>({action:g.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});g.form=te;const v=e=>({url:v.url(e),method:"get"});v.definition={methods:["get","head"],url:"/user/two-factor-secret-key"};v.url=e=>v.definition.url+E(e);v.get=e=>({url:v.url(e),method:"get"});v.head=e=>({url:v.url(e),method:"head"});const oe=e=>({action:v.url(e),method:"get"});oe.get=e=>({action:v.url(e),method:"get"});oe.head=e=>({action:v.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});v.form=oe;const _=e=>({url:_.url(e),method:"get"});_.definition={methods:["get","head"],url:"/user/two-factor-recovery-codes"};_.url=e=>_.definition.url+E(e);_.get=e=>({url:_.url(e),method:"get"});_.head=e=>({url:_.url(e),method:"head"});const ae=e=>({action:_.url(e),method:"get"});ae.get=e=>({action:_.url(e),method:"get"});ae.head=e=>({action:_.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});_.form=ae;const $=e=>({url:$.url(e),method:"post"});$.definition={methods:["post"],url:"/user/two-factor-recovery-codes"};$.url=e=>$.definition.url+E(e);$.post=e=>({url:$.url(e),method:"post"});const xe=e=>({action:$.url(e),method:"post"});xe.post=e=>({action:$.url(e),method:"post"});$.form=xe;const b=e=>({url:b.url(e),method:"get"});b.definition={methods:["get","head"],url:"/settings/two-factor"};b.url=e=>b.definition.url+E(e);b.get=e=>({url:b.url(e),method:"get"});b.head=e=>({url:b.url(e),method:"head"});const se=e=>({action:b.url(e),method:"get"});se.get=e=>({action:b.url(e),method:"get"});se.head=e=>({action:b.url({[e?.mergeQuery?"mergeQuery":"query"]:{_method:"HEAD",...e?.query??e?.mergeQuery??{}}}),method:"get"});b.form=se;Object.assign(w,Le),Object.assign(x,x),Object.assign(k,k),Object.assign(C,C),Object.assign(g,g),Object.assign(v,v),Object.assign(_,_),Object.assign($,$),Object.assign(b,b);const X=async e=>{const r=await fetch(e,{headers:{Accept:"application/json"}});if(!r.ok)throw new Error(`Failed to fetch: ${r.status}`);return r.json()},K=M([]),V=M(null),P=M(null),N=M([]),_t=Z(()=>P.value!==null&&V.value!==null),re=()=>{const e=async()=>{try{const{svg:f}=await X(g.url());P.value=f}catch{K.value.push("Failed to fetch QR code"),P.value=null}},r=async()=>{try{const{secretKey:f}=await X(v.url());V.value=f}catch{K.value.push("Failed to fetch a setup key"),V.value=null}},i=()=>{V.value=null,P.value=null,d()},d=()=>{K.value=[]};return{qrCodeSvg:P,manualSetupKey:V,recoveryCodesList:N,errors:K,hasSetupData:_t,clearSetupData:i,clearErrors:d,clearTwoFactorAuthData:()=>{i(),d(),N.value=[]},fetchQrCode:e,fetchSetupKey:r,fetchSetupData:async()=>{try{d(),await Promise.all([e(),r()])}catch{P.value=null,V.value=null}},fetchRecoveryCodes:async()=>{try{d(),N.value=await X(_.url())}catch{K.value.push("Failed to fetch recovery codes"),N.value=[]}}}},bt={class:"flex flex-col gap-3 select-none sm:flex-row sm:items-center sm:justify-between"},wt={key:0,class:"mt-6"},xt={key:1,class:"mt-3 space-y-3"},kt={key:0,class:"space-y-2"},Ct=F({__name:"TwoFactorRecoveryCodes",setup(e){const{recoveryCodesList:r,fetchRecoveryCodes:i,errors:d}=re(),u=M(!1),h=pe("recoveryCodeSectionRef"),n=async()=>{!u.value&&!r.value.length&&await i(),u.value=!u.value,u.value&&(await ye(),h.value?.scrollIntoView({behavior:"smooth"}))};return Te(async()=>{r.value.length||await i()}),(f,D)=>(a(),p(t(Qe),{class:"w-full"},{default:s(()=>[o(t(Ve),null,{default:s(()=>[o(t(ze),{class:"flex gap-3"},{default:s(()=>[o(t(nt),{class:"size-4"}),D[0]||(D[0]=y("2FA Recovery Codes ",-1))]),_:1}),o(t(gt),null,{default:s(()=>[...D[1]||(D[1]=[y(" Recovery codes let you regain access if you lose your 2FA device. Store them in a secure password manager. ",-1)])]),_:1})]),_:1}),o(t(Pe),null,{default:s(()=>[l("div",bt,[o(t(A),{onClick:n,class:"w-fit"},{default:s(()=>[(a(),p(Ae(u.value?t(lt):t(Ee)),{class:"size-4"})),y(" "+B(u.value?"Hide":"View")+" Recovery Codes ",1)]),_:1}),u.value&&t(r).length?(a(),p(t(U),R({key:0},t($).form(),{method:"post",options:{preserveScroll:!0},onSuccess:t(i)}),{default:s(({processing:T})=>[o(t(A),{variant:"secondary",type:"submit",disabled:T},{default:s(()=>[o(t(it)),D[2]||(D[2]=y(" Regenerate Codes ",-1))]),_:1},8,["disabled"])]),_:1},16,["onSuccess"])):me("",!0)]),l("div",{class:Y(["relative overflow-hidden transition-all duration-300",u.value?"h-auto opacity-100":"h-0 opacity-0"])},[t(d)?.length?(a(),c("div",wt,[o(ve,{errors:t(d)},null,8,["errors"])])):(a(),c("div",xt,[l("div",{ref_key:"recoveryCodeSectionRef",ref:h,class:"grid gap-1 rounded-lg bg-muted p-4 font-mono text-sm"},[t(r).length?(a(!0),c(S,{key:1},L(t(r),(T,j)=>(a(),c("div",{key:j},B(T),1))),128)):(a(),c("div",kt,[(a(),c(S,null,L(8,T=>l("div",{key:T,class:"h-4 animate-pulse rounded bg-muted-foreground/20"})),64))]))],512),D[3]||(D[3]=l("p",{class:"text-xs text-muted-foreground select-none"},[y(" Each recovery code can be used once to access your account and will be removed after use. If you need more, click "),l("span",{class:"font-bold"},"Regenerate Codes"),y(" above. ")],-1))]))],2)]),_:1})]),_:1}))}}),$t={class:"mb-3 w-auto rounded-full border border-border bg-card p-0.5 shadow-sm"},Ft={class:"relative overflow-hidden rounded-full border border-border bg-muted p-2.5"},Dt={class:"absolute inset-0 grid grid-cols-5 opacity-50"},qt={class:"absolute inset-0 grid grid-rows-5 opacity-50"},St={class:"relative flex w-auto flex-col items-center justify-center space-y-5"},Et={class:"relative mx-auto flex max-w-md items-center overflow-hidden"},Tt={class:"relative mx-auto aspect-square w-64 overflow-hidden rounded-lg border border-border"},At={key:0,class:"absolute inset-0 z-10 flex aspect-square h-auto w-full animate-pulse items-center justify-center bg-background"},Mt={key:1,class:"relative z-10 overflow-hidden border p-5"},Ot=["innerHTML"],Rt={class:"flex w-full items-center space-x-5"},jt={class:"flex w-full items-center justify-center space-x-2"},Bt={class:"flex w-full items-stretch overflow-hidden rounded-xl border border-border"},Qt={key:0,class:"flex h-full w-full items-center justify-center bg-muted p-3"},zt=["value"],Vt=["value"],Pt={class:"flex w-full flex-col items-center justify-center space-y-3 py-2"},Lt={class:"flex w-full items-center space-x-5"},It=F({__name:"TwoFactorSetupModal",props:Me({requiresConfirmation:{type:Boolean},twoFactorEnabled:{type:Boolean}},{isOpen:{type:Boolean},isOpenModifiers:{}}),emits:["update:isOpen"],setup(e){const r=e,i=Oe(e,"isOpen"),{copy:d,copied:u}=Ze(),{qrCodeSvg:h,manualSetupKey:n,clearSetupData:f,fetchSetupData:D,errors:T}=re(),j=M(!1),z=M(""),le=pe("pinInputContainerRef"),G=Z(()=>r.twoFactorEnabled?{title:"Two-Factor Authentication Enabled",description:"Two-factor authentication is now enabled. Scan the QR code or enter the setup key in your authenticator app.",buttonText:"Close"}:j.value?{title:"Verify Authentication Code",description:"Enter the 6-digit code from your authenticator app",buttonText:"Continue"}:{title:"Enable Two-Factor Authentication",description:"To finish enabling two-factor authentication, scan the QR code or enter the setup key in your authenticator app",buttonText:"Continue"}),ke=()=>{if(r.requiresConfirmation){j.value=!0,ye(()=>{le.value?.querySelector("input")?.focus()});return}f(),i.value=!1},Ce=()=>{r.twoFactorEnabled&&f(),j.value=!1,z.value=""};return Re(()=>i.value,async ne=>{if(!ne){Ce();return}h.value||await D()}),(ne,m)=>(a(),p(t(ct),{open:i.value,"onUpdate:open":m[5]||(m[5]=q=>i.value=q)},{default:s(()=>[o(t(mt),{class:"sm:max-w-md"},{default:s(()=>[o(t(yt),{class:"flex items-center justify-center"},{default:s(()=>[l("div",$t,[l("div",Ft,[l("div",Dt,[(a(),c(S,null,L(5,q=>l("div",{key:`col-${q}`,class:"border-r border-border last:border-r-0"})),64))]),l("div",qt,[(a(),c(S,null,L(5,q=>l("div",{key:`row-${q}`,class:"border-b border-border last:border-b-0"})),64))]),o(t(ut),{class:"relative z-20 size-6 text-foreground"})])]),o(t(ht),null,{default:s(()=>[y(B(G.value.title),1)]),_:1}),o(t(pt),{class:"text-center"},{default:s(()=>[y(B(G.value.description),1)]),_:1})]),_:1}),l("div",St,[j.value?(a(),p(t(U),R({key:1},t(k).form(),{"reset-on-error":"",onFinish:m[3]||(m[3]=q=>z.value=""),onSuccess:m[4]||(m[4]=q=>i.value=!1)}),{default:s(({errors:q,processing:J})=>[l("input",{type:"hidden",name:"code",value:z.value},null,8,Vt),l("div",{ref_key:"pinInputContainerRef",ref:le,class:"relative w-full space-y-3"},[l("div",Pt,[o(t(Ie),{id:"otp",modelValue:z.value,"onUpdate:modelValue":m[1]||(m[1]=H=>z.value=H),maxlength:6,disabled:J},{default:s(()=>[o(t(He),null,{default:s(()=>[(a(),c(S,null,L(6,H=>o(t(Ke),{key:H,index:H-1},null,8,["index"])),64))]),_:1})]),_:1},8,["modelValue","disabled"]),o(Ne,{message:q?.confirmTwoFactorAuthentication?.code},null,8,["message"])]),l("div",Lt,[o(t(A),{type:"button",variant:"outline",class:"w-auto flex-1",onClick:m[2]||(m[2]=H=>j.value=!1),disabled:J},{default:s(()=>[...m[7]||(m[7]=[y(" Back ",-1)])]),_:1},8,["disabled"]),o(t(A),{type:"submit",class:"w-auto flex-1",disabled:J||z.value.length<6},{default:s(()=>[...m[8]||(m[8]=[y(" Confirm ",-1)])]),_:1},8,["disabled"])])],512)]),_:1},16)):(a(),c(S,{key:0},[t(T)?.length?(a(),p(ve,{key:0,errors:t(T)},null,8,["errors"])):(a(),c(S,{key:1},[l("div",Et,[l("div",Tt,[t(h)?(a(),c("div",Mt,[l("div",{innerHTML:t(h),class:"aspect-square w-full justify-center rounded-lg bg-white p-2 [&_svg]:size-full"},null,8,Ot)])):(a(),c("div",At,[o(t(ie),{class:"size-6"})]))])]),l("div",Rt,[o(t(A),{class:"w-full",onClick:ke},{default:s(()=>[y(B(G.value.buttonText),1)]),_:1})]),m[6]||(m[6]=l("div",{class:"relative flex w-full items-center justify-center"},[l("div",{class:"absolute inset-0 top-1/2 h-px w-full bg-border"}),l("span",{class:"relative bg-card px-2 py-1"},"or, enter the code manually")],-1)),l("div",jt,[l("div",Bt,[t(n)?(a(),c(S,{key:1},[l("input",{type:"text",readonly:"",value:t(n),class:"h-full w-full bg-background p-3 text-foreground"},null,8,zt),l("button",{onClick:m[0]||(m[0]=q=>t(d)(t(n)||"")),class:"relative block h-auto border-l border-border px-3 hover:bg-muted"},[t(u)?(a(),p(t(at),{key:0,class:"w-4 text-green-500"})):(a(),p(t(rt),{key:1,class:"w-4"}))])],64)):(a(),c("div",Qt,[o(t(ie))]))])])],64))],64))])]),_:1})]),_:1},8,["open"]))}}),Ht={class:"space-y-6"},Kt={key:0,class:"flex flex-col items-start justify-start space-y-4"},Nt={key:1,class:"flex flex-col items-start justify-start space-y-4"},Ut={class:"relative inline"},_o=F({__name:"TwoFactor",props:{requiresConfirmation:{type:Boolean,default:!1},twoFactorEnabled:{type:Boolean,default:!1}},setup(e){const r=[{title:"Two-Factor Authentication",href:b.url()}],{hasSetupData:i,clearTwoFactorAuthData:d}=re(),u=M(!1);return je(()=>{d()}),(h,n)=>(a(),p(ot,{breadcrumbs:r},{default:s(()=>[o(t(Be),{title:"Two-Factor Authentication"}),o($e,null,{default:s(()=>[l("div",Ht,[o(Fe,{title:"Two-Factor Authentication",description:"Manage your two-factor authentication settings"}),e.twoFactorEnabled?(a(),c("div",Nt,[o(t(ue),{variant:"default"},{default:s(()=>[...n[7]||(n[7]=[y("Enabled",-1)])]),_:1}),n[9]||(n[9]=l("p",{class:"text-muted-foreground"}," With two-factor authentication enabled, you will be prompted for a secure, random pin during login, which you can retrieve from the TOTP-supported application on your phone. ",-1)),o(Ct),l("div",Ut,[o(t(U),ce(fe(t(C).form())),{default:s(({processing:f})=>[o(t(A),{variant:"destructive",type:"submit",disabled:f},{default:s(()=>[o(t(dt)),n[8]||(n[8]=y(" Disable 2FA ",-1))]),_:1},8,["disabled"])]),_:1},16)])])):(a(),c("div",Kt,[o(t(ue),{variant:"destructive"},{default:s(()=>[...n[3]||(n[3]=[y("Disabled",-1)])]),_:1}),n[6]||(n[6]=l("p",{class:"text-muted-foreground"}," When you enable two-factor authentication, you will be prompted for a secure pin during login. This pin can be retrieved from a TOTP-supported application on your phone. ",-1)),l("div",null,[t(i)?(a(),p(t(A),{key:0,onClick:n[0]||(n[0]=f=>u.value=!0)},{default:s(()=>[o(t(de)),n[4]||(n[4]=y("Continue Setup ",-1))]),_:1})):(a(),p(t(U),R({key:1},t(x).form(),{onSuccess:n[1]||(n[1]=f=>u.value=!0)}),{default:s(({processing:f})=>[o(t(A),{type:"submit",disabled:f},{default:s(()=>[o(t(de)),n[5]||(n[5]=y("Enable 2FA",-1))]),_:1},8,["disabled"])]),_:1},16))])])),o(It,{isOpen:u.value,"onUpdate:isOpen":n[2]||(n[2]=f=>u.value=f),requiresConfirmation:e.requiresConfirmation,twoFactorEnabled:e.twoFactorEnabled},null,8,["isOpen","requiresConfirmation","twoFactorEnabled"])])]),_:1})]),_:1}))}});export{_o as default};
