import{i as S,u as e,d as E,t as Be,r as L,L as pe,E as R,f as w,w as _,g as B,k as O,o as C,a as D,m as N,p as oe,M as qe,j as se,D as le,v as V,N as Se,O as Ve,e as Fe,z as Ke,c as Pe,b as $e}from"./app-BmdU9ecR.js";import{u as me,a as ve}from"./useForwardPropsEmits-BYLPh36I.js";import{c as $}from"./utils-kKsk6u8f.js";import{u as he,c as te,a as Ae,r as A,b as Ge}from"./Input.vue_vue_type_script_setup_true_lang-DoosqUzt.js";import{P as F}from"./index-DTUWwE_M.js";import{b as ge,u as He,c as T,a as j}from"./usePrimitiveElement-CssF-eZx.js";import{c as Re}from"./createLucideIcon-CRNlpRdU.js";import{h as Me}from"./chevron-down-CyEmq8LM.js";import{u as Ne}from"./Label.vue_vue_type_script_setup_true_lang-B4oUBVu3.js";import{i as ae,a as ne,u as Te}from"./check-1XSMxFQg.js";import{u as ze}from"./Textarea.vue_vue_type_script_setup_true_lang-Dnw53vpa.js";import{u as De}from"./SelectValue.vue_vue_type_script_setup_true_lang-6IIjO3kY.js";import{g as Oe}from"./utils-XesikXl4.js";import{V as je}from"./VisuallyHiddenInput-DrVTaGik.js";function Ue(n,r,t){const l=n.findIndex(s=>ae(s,r)),d=n.findIndex(s=>ae(s,t));if(l===-1||d===-1)return[];const[i,o]=[l,d].sort((s,f)=>s-f);return n.slice(i,o+1)}function We(n){const r=S(()=>e(n)),t=S(()=>new Intl.Collator("en",{usage:"search",...r.value}));return{startsWith:(o,s)=>s.length===0?!0:(o=o.normalize("NFC"),s=s.normalize("NFC"),t.value.compare(o.slice(0,s.length),s)===0),endsWith:(o,s)=>s.length===0?!0:(o=o.normalize("NFC"),s=s.normalize("NFC"),t.value.compare(o.slice(-s.length),s)===0),contains:(o,s)=>{if(s.length===0)return!0;o=o.normalize("NFC"),s=s.normalize("NFC");let f=0;const m=s.length;for(;f+m<=o.length;f++){const g=o.slice(f,f+m);if(t.value.compare(s,g)===0)return!0}return!1}}}function Xe(n,r,t){return n===void 0?!1:Array.isArray(n)?n.some(l=>M(l,r,t)):M(n,r,t)}function M(n,r,t){return n===void 0||r===void 0?!1:typeof n=="string"?n===r:typeof t=="function"?t(n,r):typeof t=="string"?n?.[t]===r?.[t]:ae(n,r)}const[ie,Je]=T("ListboxRoot");var Qe=E({__name:"ListboxRoot",props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:"vertical"},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:"toggle"},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{expose:r,emit:t}){const l=n,d=t,{multiple:i,highlightOnHover:o,orientation:s,disabled:f,selectionBehavior:m,dir:g}=Be(l),{getItems:v}=ne({isProvider:!0}),{handleTypeaheadSearch:x}=De(),{primitiveElement:k,currentElement:p}=ge(),I=ze(),W=He(g),ye=Te(p),z=L(),G=L(!1),X=L(!0),y=he(l,"modelValue",d,{defaultValue:l.defaultValue??(i.value?[]:void 0),passive:l.modelValue===void 0,deep:!0});function be(a){if(G.value=!0,l.multiple){const u=Array.isArray(y.value)?[...y.value]:[],c=u.findIndex(h=>M(h,a,l.by));l.selectionBehavior==="toggle"?(c===-1?u.push(a):u.splice(c,1),y.value=u):(y.value=[a],z.value=a)}else l.selectionBehavior==="toggle"&&M(y.value,a,l.by)?y.value=void 0:y.value=a;setTimeout(()=>{G.value=!1},1)}const b=L(null),J=L(null),K=L(!1),Q=L(!1),re=te(),Y=te(),ue=te();function Z(){return v().map(a=>a.ref).filter(a=>a.dataset.disabled!=="")}function q(a,u=!0){if(!a)return;b.value=a,X.value&&b.value.focus(),u&&b.value.scrollIntoView({block:"nearest"});const c=v().find(h=>h.ref===a);d("highlight",c)}function _e(a){if(K.value)ue.trigger(a);else{const u=v().find(c=>M(c.value,a,l.by));u&&(b.value=u.ref,q(u.ref))}}function Ce(a){b.value&&b.value.isConnected&&(a.preventDefault(),a.stopPropagation(),Q.value||b.value.click())}function xe(a){if(X.value){if(G.value=!0,K.value)Y.trigger(a);else{const u=a.altKey||a.ctrlKey||a.metaKey;if(u&&a.key==="a"&&i.value){const c=v(),h=c.map(P=>P.value);y.value=[...h],a.preventDefault(),q(c[c.length-1].ref)}else if(!u){const c=x(a.key,v());c&&q(c)}}setTimeout(()=>{G.value=!1},1)}}function we(){Q.value=!0}function Ee(){R(()=>{Q.value=!1})}function de(){R(()=>{const a=new KeyboardEvent("keydown",{key:"PageUp"});ce(a)})}function ee(a){const u=b.value;u?.isConnected&&(J.value=u),b.value=null,d("leave",a)}function ke(a){const u=new CustomEvent("listbox.entryFocus",{bubbles:!1,cancelable:!0});if(a.currentTarget?.dispatchEvent(u),d("entryFocus",u),!u.defaultPrevented)if(J.value)q(J.value);else{const c=Z()?.[0];q(c)}}function ce(a){const u=Oe(a,s.value,W.value);if(!u)return;let c=Z();if(b.value){if(u==="last")c.reverse();else if(u==="prev"||u==="next"){u==="prev"&&c.reverse();const h=c.indexOf(b.value);c=c.slice(h+1)}Ie(a,c[0])}if(c.length){const h=!b.value&&u==="prev"?c.length-1:0;q(c[h])}if(K.value)return Y.trigger(a)}function Ie(a,u){if(!(K.value||l.selectionBehavior!=="replace"||!i.value||!Array.isArray(y.value)||(a.altKey||a.ctrlKey||a.metaKey)&&!a.shiftKey)&&a.shiftKey){const h=v().filter(H=>H.ref.dataset.disabled!=="");let P=h.find(H=>H.ref===u)?.value;if(a.key===I.END?P=h[h.length-1].value:a.key===I.HOME&&(P=h[0].value),!P||!z.value)return;const Le=Ue(h.map(H=>H.value),z.value,P);y.value=Le}}async function fe(a){if(await R(),K.value)re.trigger(a);else{const u=Z(),c=u.find(h=>h.dataset.state==="checked");c?q(c):u.length&&q(u[0])}}return pe(y,()=>{G.value||R(()=>{fe()})},{immediate:!0,deep:!0}),r({highlightedElement:b,highlightItem:_e,highlightFirstItem:de,highlightSelected:fe,getItems:v}),Je({modelValue:y,onValueChange:be,multiple:i,orientation:s,dir:W,disabled:f,highlightOnHover:o,highlightedElement:b,isVirtual:K,virtualFocusHook:re,virtualKeydownHook:Y,virtualHighlightHook:ue,by:l.by,firstValue:z,selectionBehavior:m,focusable:X,onLeave:ee,onEnter:ke,changeHighlight:q,onKeydownEnter:Ce,onKeydownNavigation:ce,onKeydownTypeAhead:xe,onCompositionStart:we,onCompositionEnd:Ee,highlightFirstItem:de}),(a,u)=>(C(),w(e(F),{ref_key:"primitiveElement",ref:k,as:a.as,"as-child":a.asChild,dir:e(W),"data-disabled":e(f)?"":void 0,onPointerleave:ee,onFocusout:u[0]||(u[0]=async c=>{const h=c.relatedTarget||c.target;await R(),b.value&&e(p)&&!e(p).contains(h)&&ee(c)})},{default:_(()=>[B(a.$slots,"default",{modelValue:e(y)}),e(ye)&&a.name?(C(),w(e(je),{key:0,name:a.name,value:e(y),disabled:e(f),required:a.required},null,8,["name","value","disabled","required"])):O("v-if",!0)]),_:3},8,["as","as-child","dir","data-disabled"]))}}),Ye=Qe,Ze=E({__name:"ListboxContent",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const{CollectionSlot:r}=ne(),t=ie(),l=Ae(!1,10);return(d,i)=>(C(),w(e(r),null,{default:_(()=>[D(e(F),{role:"listbox",as:d.as,"as-child":d.asChild,tabindex:e(t).focusable.value?e(t).highlightedElement.value?"-1":"0":"-1","aria-orientation":e(t).orientation.value,"aria-multiselectable":!!e(t).multiple.value,"data-orientation":e(t).orientation.value,onMousedown:i[0]||(i[0]=oe(o=>l.value=!0,["left"])),onFocus:i[1]||(i[1]=o=>{e(l)||e(t).onEnter(o)}),onKeydown:[i[2]||(i[2]=N(o=>{e(t).orientation.value==="vertical"&&(o.key==="ArrowLeft"||o.key==="ArrowRight")||e(t).orientation.value==="horizontal"&&(o.key==="ArrowUp"||o.key==="ArrowDown")||(o.preventDefault(),e(t).focusable.value&&e(t).onKeydownNavigation(o))},["down","up","left","right","home","end"])),N(e(t).onKeydownEnter,["enter"]),e(t).onKeydownTypeAhead]},{default:_(()=>[B(d.$slots,"default")]),_:3},8,["as","as-child","tabindex","aria-orientation","aria-multiselectable","data-orientation","onKeydown"])]),_:3}))}}),et=Ze,tt=E({__name:"ListboxFilter",props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"input"}},emits:["update:modelValue"],setup(n,{emit:r}){const t=n,d=he(t,"modelValue",r,{defaultValue:"",passive:t.modelValue===void 0}),i=ie(),{primitiveElement:o,currentElement:s}=ge(),f=S(()=>t.disabled||i.disabled.value||!1),m=L();return qe(()=>m.value=i.highlightedElement.value?.id),se(()=>{i.focusable.value=!1,setTimeout(()=>{t.autoFocus&&s.value?.focus()},1)}),le(()=>{i.focusable.value=!0}),(g,v)=>(C(),w(e(F),{ref_key:"primitiveElement",ref:o,as:g.as,"as-child":g.asChild,value:e(d),disabled:f.value?"":void 0,"data-disabled":f.value?"":void 0,"aria-disabled":f.value??void 0,"aria-activedescendant":m.value,type:"text",onKeydown:[N(oe(e(i).onKeydownNavigation,["prevent"]),["down","up","home","end"]),N(e(i).onKeydownEnter,["enter"])],onInput:v[0]||(v[0]=x=>{d.value=x.target.value,e(i).highlightFirstItem()}),onCompositionstart:e(i).onCompositionStart,onCompositionend:e(i).onCompositionEnd},{default:_(()=>[B(g.$slots,"default",{modelValue:e(d)})]),_:3},8,["as","as-child","value","disabled","data-disabled","aria-disabled","aria-activedescendant","onKeydown","onCompositionstart","onCompositionend"]))}}),at=tt;const[ot,st]=T("ListboxGroup");var lt=E({__name:"ListboxGroup",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(n){const r=n,t=j(void 0,"reka-listbox-group");return st({id:t}),(l,d)=>(C(),w(e(F),V({role:"group"},r,{"aria-labelledby":e(t)}),{default:_(()=>[B(l.$slots,"default")]),_:3},16,["aria-labelledby"]))}}),nt=lt,it=E({__name:"ListboxGroupLabel",props:{for:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},setup(n){const r=n,t=ot({id:""});return(l,d)=>(C(),w(e(F),V(r,{id:e(t).id}),{default:_(()=>[B(l.$slots,"default")]),_:3},16,["id"]))}}),rt=it;const ut="listbox.select",[Kt,dt]=T("ListboxItem");var ct=E({__name:"ListboxItem",props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"div"}},emits:["select"],setup(n,{emit:r}){const t=n,l=r,d=j(void 0,"reka-listbox-item"),{CollectionItem:i}=ne(),{forwardRef:o,currentElement:s}=Ne(),f=ie(),m=S(()=>s.value===f.highlightedElement.value),g=S(()=>Xe(f.modelValue.value,t.value,f.by)),v=S(()=>f.disabled.value||t.disabled);async function x(p){l("select",p),!p?.defaultPrevented&&!v.value&&p&&(f.onValueChange(t.value),f.changeHighlight(s.value))}function k(p){const I={originalEvent:p,value:t.value};Me(ut,x,I)}return dt({isSelected:g}),(p,I)=>(C(),w(e(i),{value:p.value},{default:_(()=>[Se([m.value,g.value],()=>D(e(F),V({id:e(d)},p.$attrs,{ref:e(o),role:"option",tabindex:e(f).focusable.value?m.value?"0":"-1":-1,"aria-selected":g.value,as:p.as,"as-child":p.asChild,disabled:v.value?"":void 0,"data-disabled":v.value?"":void 0,"data-highlighted":m.value?"":void 0,"data-state":g.value?"checked":"unchecked",onClick:k,onKeydown:N(oe(k,["prevent"]),["space"]),onPointermove:I[0]||(I[0]=()=>{e(f).highlightedElement.value!==e(s)&&e(f).highlightOnHover.value&&!e(f).focusable.value&&e(f).changeHighlight(e(s),!1)})}),{default:_(()=>[B(p.$slots,"default")]),_:3},16,["id","tabindex","aria-selected","as","as-child","disabled","data-disabled","data-highlighted","data-state","onKeydown"]),I,1)]),_:3},8,["value"]))}}),ft=ct;const pt=Re("SearchIcon",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),Pt=E({__name:"Command",props:{modelValue:{default:""},defaultValue:{},multiple:{type:Boolean},orientation:{},dir:{},disabled:{type:Boolean},selectionBehavior:{},highlightOnHover:{type:Boolean},by:{},asChild:{type:Boolean},as:{},name:{},required:{type:Boolean},class:{}},emits:["update:modelValue","highlight","entryFocus","leave"],setup(n,{emit:r}){const t=n,l=r,d=A(t,"class"),i=me(d,l),o=L(new Map),s=L(new Map),{contains:f}=We({sensitivity:"base"}),m=Ve({search:"",filtered:{count:0,items:new Map,groups:new Set}});function g(){if(!m.search){m.filtered.count=o.value.size;return}m.filtered.groups=new Set;let v=0;for(const[x,k]of o.value){const p=f(k,m.search);m.filtered.items.set(x,p?1:0),p&&v++}for(const[x,k]of s.value)for(const p of k)if(m.filtered.items.get(p)>0){m.filtered.groups.add(x);break}m.filtered.count=v}return pe(()=>m.search,()=>{g()}),ht({allItems:o,allGroups:s,filterState:m}),(v,x)=>(C(),w(e(Ye),V({"data-slot":"command"},e(i),{class:e($)("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t.class)}),{default:_(()=>[B(v.$slots,"default")]),_:3},16,["class"]))}}),$t=E({__name:"CommandEmpty",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const r=n,t=A(r,"class"),{filterState:l}=U(),d=S(()=>!!l.search&&l.filtered.count===0);return(i,o)=>d.value?(C(),w(e(F),V({key:0,"data-slot":"command-empty"},e(t),{class:e($)("py-6 text-center text-sm",r.class)}),{default:_(()=>[B(i.$slots,"default")]),_:3},16,["class"])):O("",!0)}}),At=E({__name:"CommandGroup",props:{asChild:{type:Boolean},as:{},class:{},heading:{}},setup(n){const r=n,t=A(r,"class"),{allGroups:l,filterState:d}=U(),i=j(),o=S(()=>d.search?d.filtered.groups.has(i):!0);return yt({id:i}),se(()=>{l.value.has(i)||l.value.set(i,new Set)}),le(()=>{l.value.delete(i)}),(s,f)=>(C(),w(e(nt),V(e(t),{id:e(i),"data-slot":"command-group",class:e($)("text-foreground overflow-hidden p-1",r.class),hidden:o.value?void 0:!0}),{default:_(()=>[n.heading?(C(),w(e(rt),{key:0,"data-slot":"command-group-heading",class:"px-2 py-1.5 text-xs font-medium text-muted-foreground"},{default:_(()=>[Fe(Ke(n.heading),1)]),_:1})):O("",!0),B(s.$slots,"default")]),_:3},16,["id","class","hidden"]))}}),mt={"data-slot":"command-input-wrapper",class:"flex h-9 items-center gap-2 border-b px-3"},Gt=E({inheritAttrs:!1,__name:"CommandInput",props:{modelValue:{},autoFocus:{type:Boolean},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},setup(n){const r=n,t=A(r,"class"),l=ve(t),{filterState:d}=U();return(i,o)=>(C(),Pe("div",mt,[D(e(pt),{class:"size-4 shrink-0 opacity-50"}),D(e(at),V({...e(l),...i.$attrs},{modelValue:e(d).search,"onUpdate:modelValue":o[0]||(o[0]=s=>e(d).search=s),"data-slot":"command-input","auto-focus":"",class:e($)("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",r.class)}),null,16,["modelValue","class"])]))}}),Ht=E({__name:"CommandItem",props:{value:{},disabled:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["select"],setup(n,{emit:r}){const t=n,l=r,d=A(t,"class"),i=me(d,l),o=j(),{filterState:s,allItems:f,allGroups:m}=U(),g=gt(),v=S(()=>{if(s.search){const p=s.filtered.items.get(o);return p===void 0?!0:p>0}else return!0}),x=L(),k=Ge(x);return se(()=>{if(!(k.value instanceof HTMLElement))return;f.value.set(o,k.value.textContent??t.value?.toString()??"");const p=g?.id;p&&(m.value.has(p)?m.value.get(p)?.add(o):m.value.set(p,new Set([o])))}),le(()=>{f.value.delete(o)}),(p,I)=>v.value?(C(),w(e(ft),V({key:0},e(i),{id:e(o),ref_key:"itemRef",ref:x,"data-slot":"command-item",class:e($)("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t.class),onSelect:I[0]||(I[0]=()=>{e(s).search=""})}),{default:_(()=>[B(p.$slots,"default")]),_:3},16,["id","class"])):O("",!0)}}),vt={role:"presentation"},Rt=E({__name:"CommandList",props:{asChild:{type:Boolean},as:{},class:{}},setup(n){const r=n,t=A(r,"class"),l=ve(t);return(d,i)=>(C(),w(e(et),V({"data-slot":"command-list"},e(l),{class:e($)("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",r.class)}),{default:_(()=>[$e("div",vt,[B(d.$slots,"default")])]),_:3},16,["class"]))}}),[U,ht]=T("Command"),[gt,yt]=T("CommandGroup");export{pt as S,Pt as _,Gt as a,Rt as b,$t as c,At as d,Ht as e};
