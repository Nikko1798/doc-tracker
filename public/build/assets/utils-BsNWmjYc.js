import{c as _}from"./createContext-Dmfa-sxl.js";import{r as p,i as w,ad as b,J as g,E as x,D,d as I,t as F,ae as L,a5 as S,a3 as $,a4 as k,P as j,af as V}from"./app-mI0qlyDT.js";import{r as Y,S as C}from"./index-DVfQ5S1Y.js";import{i as z,l as K,b as U}from"./index-LyTPLBsE.js";function O(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}const[W]=_("ConfigProvider");function te(e){const t=W({dir:p("ltr")});return w(()=>e?.value||t.dir?.value||"ltr")}function ne(e,t="reka"){return`${t}-${b?.()}`}function q(e,t){const i=p(e);function o(u){return t[i.value][u]??i.value}return{state:i,dispatch:u=>{i.value=o(u)}}}function B(e,t){const i=p({}),o=p("none"),r=p(e),u=e.value?"mounted":"unmounted";let c;const f=t.value?.ownerDocument.defaultView??z,{state:d,dispatch:s}=q(u,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),n=a=>{if(K){const m=new CustomEvent(a,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(m)}};g(e,async(a,m)=>{const T=m!==a;if(await x(),T){const y=o.value,N=M(t.value);a?(s("MOUNT"),n("enter"),N==="none"&&n("after-enter")):N==="none"||N==="undefined"||i.value?.display==="none"?(s("UNMOUNT"),n("leave"),n("after-leave")):m&&y!==N?(s("ANIMATION_OUT"),n("leave")):(s("UNMOUNT"),n("after-leave"))}},{immediate:!0});const l=a=>{const m=M(t.value),T=m.includes(CSS.escape(a.animationName)),y=d.value==="mounted"?"enter":"leave";if(a.target===t.value&&T&&(n(`after-${y}`),s("ANIMATION_END"),!r.value)){const N=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",c=f?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=N)})}a.target===t.value&&m==="none"&&s("ANIMATION_END")},v=a=>{a.target===t.value&&(o.value=M(t.value))},E=g(t,(a,m)=>{a?(i.value=getComputedStyle(a),a.addEventListener("animationstart",v),a.addEventListener("animationcancel",l),a.addEventListener("animationend",l)):(s("ANIMATION_END"),c!==void 0&&f?.clearTimeout(c),m?.removeEventListener("animationstart",v),m?.removeEventListener("animationcancel",l),m?.removeEventListener("animationend",l))},{immediate:!0}),A=g(d,()=>{const a=M(t.value);o.value=d.value==="mounted"?a:"none"});return D(()=>{E(),A()}),{isPresent:w(()=>["mounted","unmountSuspended"].includes(d.value))}}function M(e){return e&&getComputedStyle(e).animationName||"none"}var ae=I({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:i}){const{present:o,forceMount:r}=F(e),u=p(),{isPresent:c}=B(o,u);i({present:c});let f=t.default({present:c.value});f=Y(f||[]);const d=L();if(f&&f?.length>1){const s=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${s}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(n=>`  - ${n}`).join(`
`)].join(`
`))}return()=>r.value||o.value||c.value?S(t.default({present:c.value})[0],{ref:s=>{const n=U(s);return typeof n?.hasAttribute>"u"||(n?.hasAttribute("data-reka-popper-content-wrapper")?u.value=n.firstElementChild:u.value=n),n}}):null}});function P(){const e=p(),t=w(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:U(e));return{primitiveElement:e,currentElement:t}}const R="data-reka-collection-item";function oe(e={}){const{key:t="",isProvider:i=!1}=e,o=`${t}CollectionProvider`;let r;if(i){const n=p(new Map);r={collectionRef:p(),itemMap:n},$(o,r)}else r=k(o);const u=(n=!1)=>{const l=r.collectionRef.value;if(!l)return[];const v=Array.from(l.querySelectorAll(`[${R}]`)),A=Array.from(r.itemMap.value.values()).sort((h,a)=>v.indexOf(h.ref)-v.indexOf(a.ref));return n?A:A.filter(h=>h.ref.dataset.disabled!=="")},c=I({name:"CollectionSlot",setup(n,{slots:l}){const{primitiveElement:v,currentElement:E}=P();return g(E,()=>{r.collectionRef.value=E.value}),()=>S(C,{ref:v},l)}}),f=I({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:l,attrs:v}){const{primitiveElement:E,currentElement:A}=P();return j(h=>{if(A.value){const a=V(A.value);r.itemMap.value.set(a,{ref:A.value,value:n.value}),h(()=>r.itemMap.value.delete(a))}}),()=>S(C,{...v,[R]:"",ref:E},l)}}),d=w(()=>Array.from(r.itemMap.value.values())),s=w(()=>r.itemMap.value.size);return{getItems:u,reactiveItems:d,itemMapSize:s,CollectionSlot:c,CollectionItem:f}}const ie="rovingFocusGroup.onEntryFocus",re={bubbles:!1,cancelable:!0},G={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function H(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function se(e,t,i){const o=H(e.key,i);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return G[o]}function le(e,t=!1){const i=O();for(const o of e)if(o===i||(o.focus({preventScroll:t}),O()!==i))return}function ue(e,t){return e.map((i,o)=>e[(t+o)%e.length])}export{ie as E,ae as P,ne as a,oe as b,P as c,O as d,re as e,le as f,se as g,W as i,te as u,ue as w};
