import{_ as C}from"./Datatable.vue_vue_type_style_index_0_lang-C8DtoPtr.js";import{s as p}from"./index-ikzcNs2d.js";import{_ as h}from"./index-C0cmME4x.js";import{d as T,B as P,r as _,c as u,b as r,a as o,w as t,e as c,u as d,l as M,z as n,o as m,F as g,G as D,I as A,J as U}from"./app-B8N2o1qG.js";import{_ as N}from"./documentDrawerForm.vue_vue_type_script_setup_true_lang-B2_35OVl.js";import{c as f}from"./createLucideIcon-C-wv_4BO.js";const L=f("PlusIcon",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const R=f("QrCodeIcon",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const $=f("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),I={class:"flex justify-start items-center"},j=["onChange"],q={key:0,selected:""},F={key:1,value:""},H=["selected","value"],Q={class:"flex items-center justify-center space-x-4"},z={class:"space-x-2"},W=T({__name:"documentTableForAuthUser",props:{documentTypes:{type:Array,default:()=>[]},complexities:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},employees:{type:Array,default:()=>[]},documentType:{type:Number,default:0,required:!0}},setup(l){const b=l,w=P(),k=(async(i,e)=>{const s=i.target;try{const a=await A.patch(p("document.update-doc-status",e),{doc_status:s.value},{})}catch{}}),S=(i=>{window.open(p("document.generateQr",i),"_blank")}),y=_(!1),v=_({}),x=i=>{v.value=i,y.value=!0,console.log(U(v.value))};return(i,e)=>(m(),u(g,null,[r("div",I,[o(d(M),{href:d(p)("document.index")},{default:t(()=>[o(h,{class:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-800 hover:cursor-pointer"},{default:t(()=>[o(d(L)),e[1]||(e[1]=c("Create New",-1))]),_:1})]),_:1},8,["href"])]),o(C,{apiUrl:d(p)("document.fetch-all-documents"),extraParams:{document_type:b.documentType},tableHeaders:[],"visible-columns":["document_status","date_received","time_received","document_type","title","concerned_party_or_supplier","service_to_ncca","authority_or_fund_source","ncca_end_user","other_details","office_concerned","control_number","date_ready","date_released","time_released","remarks","total_service_amount","actions"],sortableColumns:["id","title","date_received"],itemsPerPage:1,eventName:"refresh-all-documents",rowDblClick:x},{"header-document_status":t(()=>[...e[2]||(e[2]=[r("div",{class:"text-white"},"Document Status",-1)])]),"header-date_received":t(()=>[...e[3]||(e[3]=[r("div",{class:"text-white"},"Date Received",-1)])]),"header-time_received":t(()=>[...e[4]||(e[4]=[r("div",{class:"text-white"},"Time Received",-1)])]),"header-document_type":t(()=>[...e[5]||(e[5]=[r("div",{class:"text-white"},"Document type",-1)])]),"header-title":t(()=>[...e[6]||(e[6]=[r("div",{class:"text-white"},"Project/Program",-1)])]),"header-concerned_party_or_supplier":t(()=>[...e[7]||(e[7]=[r("div",{class:"text-white"},"Concerned Party or Supplier",-1)])]),"header-service_to_ncca":t(()=>[...e[8]||(e[8]=[r("div",{class:"text-white"},"Service to NCCA",-1)])]),"header-authority_or_fund_source":t(()=>[...e[9]||(e[9]=[r("div",{class:"text-white"},"Authority/Fund Source",-1)])]),"header-ncca_end_user":t(()=>[...e[10]||(e[10]=[r("div",{class:"text-white"},"NCCA End user",-1)])]),"header-other_details":t(()=>[...e[11]||(e[11]=[r("div",{class:"text-white"},"Other details",-1)])]),"header-office_concerned":t(()=>[...e[12]||(e[12]=[r("div",{class:"text-white"},"Office Concerned",-1)])]),"header-control_number":t(()=>[...e[13]||(e[13]=[r("div",{class:"text-white"},"Control number",-1)])]),"header-date_ready":t(()=>[...e[14]||(e[14]=[r("div",{class:"text-white"},"Date ready",-1)])]),"header-date_released":t(()=>[...e[15]||(e[15]=[r("div",{class:"text-white"},"Date released",-1)])]),"header-time_released":t(()=>[...e[16]||(e[16]=[r("div",{class:"text-white"},"Time released",-1)])]),"header-total_service_amount":t(()=>[...e[17]||(e[17]=[r("div",{class:"text-white"},"Total Service Amount",-1)])]),"header-remarks":t(()=>[...e[18]||(e[18]=[r("div",{class:"text-white"},"Remarks",-1)])]),"header-actions":t(()=>[...e[19]||(e[19]=[r("div",{class:"text-white"},"Action",-1)])]),"cell-0":t(({rowData:s})=>[r("span",null,[r("select",{onChange:a=>k(a,s.id),id:"countries",class:"block w-full px-3 py-2.5 bg-neutral-secondary-medium border border-default-medium text-heading text-sm rounded-base focus:ring-brand focus:border-brand shadow-xs placeholder:text-body"},[s.document_status_id?(m(),u("option",F,"Select status")):(m(),u("option",q,"Select status")),(m(!0),u(g,null,D(d(w).props.documentStatus,(a,B)=>(m(),u("option",{selected:s.document_status_id===a.id,key:a.id,value:a.id},n(a.codevalue),9,H))),128))],40,j)])]),"cell-1":t(({rowData:s})=>[r("span",null,n(s.date_received?new Date(s.date_received+"T00:00:00").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""),1)]),"cell-2":t(({rowData:s})=>[c(n(s.time_received?new Date(`1970-01-01T${s.time_received}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),"cell-12":t(({rowData:s})=>[r("span",null,n(s.date_ready?new Date(s.date_ready+"T00:00:00").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""),1)]),"cell-13":t(({rowData:s})=>[r("span",null,n(s.date_released?new Date(s.date_released+"T00:00:00").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):""),1)]),"cell-14":t(({rowData:s})=>[c(n(s.time_released?new Date(`1970-01-01T${s.time_released}`).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):""),1)]),"cell-16":t(({rowData:s})=>[r("span",null,n(new Intl.NumberFormat("en-PH",{style:"currency",currency:"PHP"}).format(s.total_service_amount)),1)]),"cell-17":t(({rowData:s})=>[r("div",Q,[o(h,{onClick:a=>S(s.id),class:"bg-blue-500 hover:bg-blue-800 hover:cursor-pointer"},{default:t(()=>[o(d(R)),e[20]||(e[20]=c(" Generate QR",-1))]),_:1},8,["onClick"]),o(h,{onClick:a=>x(s),'"':"",class:"bg-blue-500 hover:bg-blue-800 hover:cursor-pointer"},{default:t(()=>[o(d($)),e[21]||(e[21]=c(" Update",-1))]),_:1},8,["onClick"])]),r("div",z,[o(N,{open:y.value,"onUpdate:open":e[0]||(e[0]=a=>y.value=a),rowData:v.value,documentTypes:l.documentTypes,complexities:l.complexities,offices:l.offices,employees:l.employees},null,8,["open","rowData","documentTypes","complexities","offices","employees"])])]),_:1},8,["apiUrl","extraParams"])],64))}});export{W as _};
