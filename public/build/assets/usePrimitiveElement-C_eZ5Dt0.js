import{_ as C,Z as S,r as d,i as y,ae as T,L as N,E as x,D as $,d as O,t as b,af as P,$ as U}from"./app-LT_ArLpB.js";import{r as j}from"./index-DJDdTgWW.js";import{g as D,j as _,n as w}from"./Input.vue_vue_type_script_setup_true_lang-CM-SWIUH.js";function L(e,t){const s=typeof e=="string"&&!t?`${e}Context`:t,o=Symbol(s);return[i=>{const r=C(o,i);if(r||r===null)return r;throw new Error(`Injection \`${o.toString()}\` not found. Component must be used within ${Array.isArray(e)?`one of the following components: ${e.join(", ")}`:`\`${e}\``}`)},i=>(S(o,i),i)]}function Y(){let e=document.activeElement;if(e==null)return null;for(;e!=null&&e.shadowRoot!=null&&e.shadowRoot.activeElement!=null;)e=e.shadowRoot.activeElement;return e}function Z(e){return e==null}const[R]=L("ConfigProvider");function z(e){const t=R({dir:d("ltr")});return y(()=>e?.value||t.dir?.value||"ltr")}function G(e,t="reka"){return`${t}-${T?.()}`}function F(e,t){const s=d(e);function o(c){return t[s.value][c]??s.value}return{state:s,dispatch:c=>{s.value=o(c)}}}function k(e,t){const s=d({}),o=d("none"),v=d(e),c=e.value?"mounted":"unmounted";let i;const r=t.value?.ownerDocument.defaultView??D,{state:m,dispatch:u}=F(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),a=n=>{if(_){const l=new CustomEvent(n,{bubbles:!1,cancelable:!1});t.value?.dispatchEvent(l)}};N(e,async(n,l)=>{const E=l!==n;if(await x(),E){const A=o.value,f=h(t.value);n?(u("MOUNT"),a("enter"),f==="none"&&a("after-enter")):f==="none"||f==="undefined"||s.value?.display==="none"?(u("UNMOUNT"),a("leave"),a("after-leave")):l&&A!==f?(u("ANIMATION_OUT"),a("leave")):(u("UNMOUNT"),a("after-leave"))}},{immediate:!0});const p=n=>{const l=h(t.value),E=l.includes(CSS.escape(n.animationName)),A=m.value==="mounted"?"enter":"leave";if(n.target===t.value&&E&&(a(`after-${A}`),u("ANIMATION_END"),!v.value)){const f=t.value.style.animationFillMode;t.value.style.animationFillMode="forwards",i=r?.setTimeout(()=>{t.value?.style.animationFillMode==="forwards"&&(t.value.style.animationFillMode=f)})}n.target===t.value&&l==="none"&&u("ANIMATION_END")},g=n=>{n.target===t.value&&(o.value=h(t.value))},M=N(t,(n,l)=>{n?(s.value=getComputedStyle(n),n.addEventListener("animationstart",g),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p)):(u("ANIMATION_END"),i!==void 0&&r?.clearTimeout(i),l?.removeEventListener("animationstart",g),l?.removeEventListener("animationcancel",p),l?.removeEventListener("animationend",p))},{immediate:!0}),I=N(m,()=>{const n=h(t.value);o.value=m.value==="mounted"?n:"none"});return $(()=>{M(),I()}),{isPresent:y(()=>["mounted","unmountSuspended"].includes(m.value))}}function h(e){return e&&getComputedStyle(e).animationName||"none"}var H=O({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(e,{slots:t,expose:s}){const{present:o,forceMount:v}=b(e),c=d(),{isPresent:i}=k(o,c);s({present:i});let r=t.default({present:i.value});r=j(r||[]);const m=P();if(r&&r?.length>1){const u=m?.parent?.type.name?`<${m.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${u}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(a=>`  - ${a}`).join(`
`)].join(`
`))}return()=>v.value||o.value||i.value?U(t.default({present:i.value})[0],{ref:u=>{const a=w(u);return typeof a?.hasAttribute>"u"||(a?.hasAttribute("data-reka-popper-content-wrapper")?c.value=a.firstElementChild:c.value=a),a}}):null}});function J(){const e=d(),t=y(()=>["#text","#comment"].includes(e.value?.$el.nodeName)?e.value?.$el.nextElementSibling:w(e));return{primitiveElement:e,currentElement:t}}export{H as P,G as a,J as b,L as c,R as d,Y as g,Z as i,z as u};
