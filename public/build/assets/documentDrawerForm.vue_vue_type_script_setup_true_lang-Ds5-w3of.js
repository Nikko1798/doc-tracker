import{_ as Ve,a as be,b as he}from"./SheetHeader.vue_vue_type_script_setup_true_lang-pWJ6Anb0.js";import{c as U}from"./utils-kKsk6u8f.js";import{$ as $e,a as P,b as xe,_ as S,c as C,d as q,e as O,f as z,g as M,h as H,i as J,j as I,k as K,l as W,m as X,n as Y,o as Z,p as ee,q as le,r as ae,s as te}from"./index-DHuCDXRZ.js";import{_ as V}from"./index-4UkQSTfh.js";import{_ as x}from"./Input.vue_vue_type_script_setup_true_lang-BiDZDTor.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-DvYNihaL.js";import{d as ke,B as Ne,r as w,y as De,L as E,i as oe,f as k,u as e,w as o,a as l,b as n,k as se,e as d,z as y,x as Ue,c as A,H as j,G as B,F,J as Se,o as f}from"./app-DI_r0fHf.js";import{_ as Ce,a as Oe}from"./index-fFvEen2a.js";import{_ as re}from"./Badge.vue_vue_type_script_setup_true_lang-Bgg5Ol0J.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-DIyMAznW.js";import{s as ne}from"./index-ikzcNs2d.js";import{C as Ee}from"./check-check-DvkDh4IB.js";import{a as de}from"./chevrons-up-down-Bm0xQcg1.js";import{C as ue}from"./check-D4pEpVL_.js";function Ae(u){return{all:u=u||new Map,on:function(p,i){var _=u.get(p);_?_.push(i):u.set(p,[i])},off:function(p,i){var _=u.get(p);_&&(i?_.splice(_.indexOf(i)>>>0,1):u.set(p,[]))},emit:function(p,i){var _=u.get(p);_&&_.slice().map(function(g){g(i)}),(_=u.get("*"))&&_.slice().map(function(g){g(p,i)})}}}const je=Ae(),Pe={class:"grid p-5"},Be={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Fe={class:"space-y-2"},Re={class:"space-y-2"},Le={class:"date_received_date"},Te={class:"space-y-2"},Qe={class:"grid grid-cols-1 gap-2"},qe={class:"space-y-2"},ze={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Ge={class:"space-y-2"},Me={class:"space-y-2"},He={class:"grid grid-cols-1 gap-2"},Je={class:"space-y-2"},Ie={class:"grid grid-cols-1 gap-2"},Ke={class:"space-y-2"},We={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Xe={class:"space-y-2"},Ye={class:"space-y-2"},Ze={class:"ncca_end_user_div"},el={class:"grid grid-cols-1 md:grid-cols-[50%_25%_25%] gap-2"},ll={class:"space-y-2"},al={class:"office_concerned_div"},tl={class:"space-y-2"},ol={class:"space-y-2"},sl={class:"date_received_div"},rl={class:"space-y-2"},nl={class:"space-y-2"},dl={class:"date_released_div"},ul={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},il={class:"space-y-2"},cl={class:"space-y-2"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},_l={class:"space-y-2"},fl={key:0,class:"flex items-center justify-center space-x-4"},Cl=ke({__name:"documentDrawerForm",props:{documentTypes:{type:Array,default:()=>[]},complexities:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},employees:{type:Array,default:()=>[]},rowData:{type:Object,default:()=>{}},open:{type:Boolean,default:!1}},emits:["update:open"],setup(u,{emit:p}){const i=u,_=Ne(),g=w(null),ie=p,R=$e(P()),b=w(),h=w(),$=w(),L=new xe("en-US",{dateStyle:"long"}),T=w(""),Q=w(""),t=De({date_received:null,document_type:null,title:"",control_number:"",complexity:null,other_details:"",person_claiming_or_remarks:"",authority_or_fund_source:"",ncca_end_user:null,office_concerned:null,date_ready:null,date_released:null,service_to_ncca:"",concerned_party_or_supplier:"",total_service_amount:0,NewEmployeeName:"",NewOfficeName:""});E(b,(r,a)=>{t.date_received=r?r.toString():null}),E(h,(r,a)=>{t.date_ready=r?r.toString():null}),E($,(r,a)=>{t.date_released=r?r.toString():null}),E(()=>_.props.flash?.success,r=>{g.value=r},{immediate:!0});const N=w(!1),D=w(!1),ce=oe(()=>i.employees.find(r=>r.id===t.ncca_end_user));function me(r){t.ncca_end_user=r===t.ncca_end_user?"":r,t.NewEmployeeName="",D.value=!1}function _e(){t.ncca_end_user=null,t.NewEmployeeName=T.value,D.value=!1}const fe=oe(()=>i.offices.find(r=>r.id===t.office_concerned));function pe(r){t.office_concerned=r===t.office_concerned?"":r,t.NewOfficeName="",N.value=!1}function ye(){t.office_concerned=null,t.NewOfficeName=Q.value,N.value=!1}const ve=()=>{t.patch(ne("document.update-document",i.rowData.id),{onSuccess:()=>{je.emit("refresh-all-documents")}})};function ge(){g.value=null;const r=i.rowData;console.log(Se(r.document_type)),t.document_type=r.document_type_id,t.date_received=r.date_received,t.title=r.title,t.control_number=r.control_number,t.complexity=r.complexity_id,t.other_details=r.other_details,t.person_claiming_or_remarks=r.remarks,t.authority_or_fund_source=r.authority_or_fund_source,t.ncca_end_user=r.ncca_end_user_id,t.office_concerned=r.office_concerned_id,t.date_ready=r.date_ready,t.date_released=r.date_released,t.service_to_ncca=r.service_to_ncca??"",t.concerned_party_or_supplier=r.concerned_party_or_supplier??"",t.total_service_amount=r.total_service_amount??0}E(()=>i.rowData,r=>{console.log(r),r&&ge()},{deep:!0});const we=(r=>{window.open(ne("document.generateQr",r),"_blank")});return(r,a)=>(f(),k(e(Ve),{open:i.open,"onUpdate:open":a[20]||(a[20]=G=>ie("update:open",G))},{default:o(()=>[l(e(he),{class:"md:w-[45%] w-[95%] overflow-y-auto"},{default:o(()=>[l(e(be),null,{default:o(()=>[n("div",Pe,[g.value?(f(),k(e(Ce),{key:0,class:"bg-green-700 text-white"},{default:o(()=>[l(e(Ee)),l(e(Oe),null,{default:o(()=>[d(y(g.value),1)]),_:1})]),_:1})):se("",!0)]),l(e(Ue),{class:"p-5 space-y-5"},{default:o(({errors:G,processing:pl})=>[n("div",Be,[n("div",Fe,[n("div",Re,[l(c,null,{default:o(()=>[...a[21]||(a[21]=[d("Date received",-1)])]),_:1}),n("div",Le,[l(e(S),{class:"w-full"},{default:o(({close:s})=>[l(e(C),{"as-child":""},{default:o(()=>[l(e(V),{variant:"outline",class:j(e(U)("w-full justify-start text-left font-normal",!b.value&&"text-muted-foreground"))},{default:o(()=>[l(e(q)),d(" "+y(b.value?e(L).format(b.value.toDate(e(P)())):u.rowData.date_received?new Date(u.rowData.date_received).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(O),{class:"w-auto p-0",align:"start"},{default:o(()=>[l(e(z),{modelValue:b.value,"onUpdate:modelValue":[a[0]||(a[0]=v=>b.value=v),s],"default-placeholder":e(R),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(m,{message:e(t).errors.date_received},null,8,["message"])])]),n("div",Te,[l(c,null,{default:o(()=>[...a[22]||(a[22]=[d("Document type",-1)])]),_:1}),l(e(M),{modelValue:e(t).document_type,"onUpdate:modelValue":a[1]||(a[1]=s=>e(t).document_type=s)},{default:o(()=>[l(e(H),{class:"w-full"},{default:o(()=>[l(e(J),{placeholder:"Select a document type"})]),_:1}),l(e(I),null,{default:o(()=>[l(e(K),null,{default:o(()=>[(f(!0),A(F,null,B(u.documentTypes,s=>(f(),k(e(ae),{key:s.id,value:s.id},{default:o(()=>[d(y(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(m,{message:e(t).errors.document_type},null,8,["message"])])]),n("div",Qe,[n("div",qe,[l(c,null,{default:o(()=>[...a[23]||(a[23]=[d("Title",-1)])]),_:1}),l(x,{type:"text",modelValue:e(t).title,"onUpdate:modelValue":a[2]||(a[2]=s=>e(t).title=s),id:"title",name:"title",placeholder:"enter title here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.title},null,8,["message"])])]),n("div",ze,[n("div",Ge,[l(c,null,{default:o(()=>[...a[24]||(a[24]=[d("Control Number",-1)])]),_:1}),l(x,{type:"text",modelValue:e(t).control_number,"onUpdate:modelValue":a[3]||(a[3]=s=>e(t).control_number=s),id:"control_number",name:"control_number",placeholder:"enter control number here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.control_number},null,8,["message"])]),n("div",Me,[l(c,null,{default:o(()=>[...a[25]||(a[25]=[d("Simple/Complex",-1)])]),_:1}),l(e(M),{modelValue:e(t).complexity,"onUpdate:modelValue":a[4]||(a[4]=s=>e(t).complexity=s)},{default:o(()=>[l(e(H),{class:"w-full"},{default:o(()=>[l(e(J),{placeholder:"Select a complexity"})]),_:1}),l(e(I),null,{default:o(()=>[l(e(K),null,{default:o(()=>[(f(!0),A(F,null,B(u.complexities,s=>(f(),k(e(ae),{key:s.id,value:s.id},{default:o(()=>[d(y(s.codevalue),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(m,{message:e(t).errors.complexity},null,8,["message"])])]),n("div",He,[n("div",Je,[l(c,null,{default:o(()=>[...a[26]||(a[26]=[d("Other details",-1)])]),_:1}),l(W,{modelValue:e(t).other_details,"onUpdate:modelValue":a[5]||(a[5]=s=>e(t).other_details=s),id:"other_details",name:"other_details",rows:"2",placeholder:"enter other details here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.other_details},null,8,["message"])])]),n("div",Ie,[n("div",Ke,[l(c,null,{default:o(()=>[...a[27]||(a[27]=[d("Person claiming/Remarks",-1)])]),_:1}),l(W,{modelValue:e(t).person_claiming_or_remarks,"onUpdate:modelValue":a[6]||(a[6]=s=>e(t).person_claiming_or_remarks=s),id:"person_claiming_or_remarks",name:"person_claiming_or_remarks",rows:"2",placeholder:"enter remarks here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.person_claiming_or_remarks},null,8,["message"])])]),n("div",We,[n("div",Xe,[l(c,null,{default:o(()=>[...a[28]||(a[28]=[d("Authority/Fund Source",-1)])]),_:1}),l(x,{type:"text",modelValue:e(t).authority_or_fund_source,"onUpdate:modelValue":a[7]||(a[7]=s=>e(t).authority_or_fund_source=s),id:"authority_or_fund_source",name:"authority_or_fund_source",placeholder:"enter authority or fund source here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.authority_or_fund_source},null,8,["message"])]),n("div",Ye,[l(c,null,{default:o(()=>[...a[29]||(a[29]=[d("NCCA End User",-1)])]),_:1}),n("div",Ze,[l(e(S),{open:D.value,"onUpdate:open":a[10]||(a[10]=s=>D.value=s)},{default:o(()=>[l(e(C),{"as-child":""},{default:o(()=>[l(e(V),{variant:"outline",role:"combobox","aria-expanded":D.value,class:"w-full justify-between"},{default:o(()=>[d(y(ce.value?.name||(e(t).NewEmployeeName?e(t).NewEmployeeName:"Employee..."))+" ",1),l(e(de),{class:"opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),l(e(O),{class:"w-full p-0"},{default:o(()=>[l(e(X),null,{default:o(()=>[l(e(Y),{class:"h-9 border border-gray-300 rounded-lg p-4",placeholder:"Search employee...",modelValue:T.value,"onUpdate:modelValue":a[8]||(a[8]=s=>T.value=s)},null,8,["modelValue"]),l(e(Z),null,{default:o(()=>[l(e(ee),{class:"pr-2 pl-2"},{default:o(()=>[l(re,{onClick:_e,class:"bg-blue-500 w-full hover:cursor-pointer hover:bg-blue-800"},{default:o(()=>[...a[30]||(a[30]=[d(" Add this to the list ",-1)])]),_:1})]),_:1}),l(e(le),{class:"bg-gray-300"},{default:o(()=>[(f(!0),A(F,null,B(i.employees,s=>(f(),k(e(te),{class:"hover:cursor-pointer hover:bg-gray-200",key:s.id,value:s.id,onSelect:a[9]||(a[9]=v=>{me(v.detail.value)})},{default:o(()=>[d(y(s.name)+" ",1),l(e(ue),{class:j(e(U)("ml-auto",e(t).ncca_end_user===s.id?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),l(m,{message:e(t).errors.ncca_end_user},null,8,["message"])])]),n("div",el,[n("div",ll,[l(c,null,{default:o(()=>[...a[31]||(a[31]=[d("Office Concerned",-1)])]),_:1}),n("div",al,[l(e(S),{open:N.value,"onUpdate:open":a[13]||(a[13]=s=>N.value=s)},{default:o(()=>[l(e(C),{"as-child":""},{default:o(()=>[l(e(V),{variant:"outline",role:"combobox","aria-expanded":N.value,class:"w-full justify-between"},{default:o(()=>[d(y(fe.value?.name||(e(t).NewOfficeName?e(t).NewOfficeName:"Office..."))+" ",1),l(e(de),{class:"opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),l(e(O),{class:"w-full p-0"},{default:o(()=>[l(e(X),null,{default:o(()=>[l(e(Y),{class:"h-9",placeholder:"Search office...",modelValue:Q.value,"onUpdate:modelValue":a[11]||(a[11]=s=>Q.value=s)},null,8,["modelValue"]),l(e(Z),null,{default:o(()=>[l(e(ee),null,{default:o(()=>[l(re,{onClick:ye,class:"bg-blue-500 w-full hover:cursor-pointer hover:bg-blue-800"},{default:o(()=>[...a[32]||(a[32]=[d(" Add this to the list ",-1)])]),_:1})]),_:1}),l(e(le),null,{default:o(()=>[(f(!0),A(F,null,B(i.offices,s=>(f(),k(e(te),{key:s.id,value:s.id,onSelect:a[12]||(a[12]=v=>{pe(v.detail.value)})},{default:o(()=>[d(y(s.name)+" ",1),l(e(ue),{class:j(e(U)("ml-auto",e(t).office_concerned===s.id?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),l(m,{message:e(t).errors.office_concerned},null,8,["message"])]),n("div",tl,[n("div",ol,[l(c,null,{default:o(()=>[...a[33]||(a[33]=[d("Date ready",-1)])]),_:1}),n("div",sl,[l(e(S),{class:"w-full"},{default:o(({close:s})=>[l(e(C),{"as-child":""},{default:o(()=>[l(e(V),{variant:"outline",class:j(e(U)("w-full justify-start text-left font-normal",!h.value&&"text-muted-foreground"))},{default:o(()=>[l(e(q)),d(" "+y(h.value?e(L).format(h.value.toDate(e(P)())):u.rowData.date_time_ready?new Date(u.rowData.date_time_ready).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(O),{class:"w-auto p-0",align:"start"},{default:o(()=>[l(e(z),{modelValue:h.value,"onUpdate:modelValue":[a[14]||(a[14]=v=>h.value=v),s],"default-placeholder":e(R),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(m,{message:e(t).errors.date_received},null,8,["message"])])]),n("div",rl,[n("div",nl,[l(c,null,{default:o(()=>[...a[34]||(a[34]=[d("Date released",-1)])]),_:1}),n("div",dl,[l(e(S),{class:"w-full"},{default:o(({close:s})=>[l(e(C),{"as-child":""},{default:o(()=>[l(e(V),{variant:"outline",class:j(e(U)("w-full justify-start text-left font-normal",!$.value&&"text-muted-foreground"))},{default:o(()=>[l(e(q)),d(" "+y($.value?e(L).format($.value.toDate(e(P)())):u.rowData.date_time_released?new Date(u.rowData.date_time_released).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(O),{class:"w-auto p-0",align:"start"},{default:o(()=>[l(e(z),{modelValue:$.value,"onUpdate:modelValue":[a[15]||(a[15]=v=>$.value=v),s],"default-placeholder":e(R),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(m,{message:e(t).errors.date_released},null,8,["message"])])])]),n("div",ul,[n("div",il,[l(c,null,{default:o(()=>[...a[35]||(a[35]=[d("Service to NCCA",-1)])]),_:1}),l(x,{type:"text",modelValue:e(t).service_to_ncca,"onUpdate:modelValue":a[16]||(a[16]=s=>e(t).service_to_ncca=s),id:"service_to_ncca",name:"service_to_ncca",placeholder:"enter service to ncca here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.service_to_ncca},null,8,["message"])]),n("div",cl,[l(c,null,{default:o(()=>[...a[36]||(a[36]=[d("Concerned Party/Supplier",-1)])]),_:1}),l(x,{type:"text",modelValue:e(t).concerned_party_or_supplier,"onUpdate:modelValue":a[17]||(a[17]=s=>e(t).concerned_party_or_supplier=s),id:"concerned_party_or_supplier",name:"concerned_party_or_supplier",placeholder:"enter concerned party or supplier here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.concerned_party_or_supplier},null,8,["message"])])]),n("div",ml,[n("div",_l,[l(c,null,{default:o(()=>[...a[37]||(a[37]=[d("Total Service Amount (Php.)",-1)])]),_:1}),l(x,{type:"number",modelValue:e(t).total_service_amount,"onUpdate:modelValue":a[18]||(a[18]=s=>e(t).total_service_amount=s),id:"total_service_amount",name:"total_service_amount",placeholder:"enter total service amount here...."},null,8,["modelValue"]),l(m,{message:e(t).errors.total_service_amount},null,8,["message"])])]),r.$page.props.auth.user?(f(),A("div",fl,[l(e(V),{type:"button",onClick:ve,class:"cursor-pointer"},{default:o(()=>[...a[38]||(a[38]=[d("Submit",-1)])]),_:1}),l(e(V),{type:"button",onClick:a[19]||(a[19]=s=>we(u.rowData.id)),class:"cursor-pointer"},{default:o(()=>[...a[39]||(a[39]=[d("Generate QR",-1)])]),_:1})])):se("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}});export{Cl as _,je as e};
