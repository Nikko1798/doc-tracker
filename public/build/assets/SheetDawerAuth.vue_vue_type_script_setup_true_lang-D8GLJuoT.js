import{_ as ge,a as we}from"./SheetHeader.vue_vue_type_script_setup_true_lang-CAbG-t7U.js";import{c as D}from"./utils-kKsk6u8f.js";import{$ as Ve,a as j,b as be,_ as S,c as C,d as Q,e as O,f as z,g as G}from"./Textarea.vue_vue_type_script_setup_true_lang-BAkXh1PX.js";import{_ as b}from"./index-C0cmME4x.js";import{_ as g}from"./Input.vue_vue_type_script_setup_true_lang-DUAjcq1S.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-BtaCqrsi.js";import{d as he,B as xe,r as w,y as $e,L as E,i as M,J as q,f as k,u as e,w as s,a as l,b as r,k as H,e as n,z as v,x as ke,c as A,H as P,G as B,F as T,o as f}from"./app-B8N2o1qG.js";import{_ as J,a as I,b as K,c as W,d as X,e as Y}from"./SelectValue.vue_vue_type_script_setup_true_lang-ClPeWE1D.js";import{_ as Z,a as ee,b as le,c as ae,d as te,e as se}from"./index-BANZ4MUu.js";import{_ as Ne,a as Ue}from"./index-CuH_zz6-.js";import{_ as oe}from"./Badge.vue_vue_type_script_setup_true_lang-BFNbSj8Q.js";import{_ as c}from"./InputError.vue_vue_type_script_setup_true_lang-BQnAmHbu.js";import{s as de}from"./index-ikzcNs2d.js";import{C as De}from"./check-check-6E214H6h.js";import{C as re}from"./chevrons-up-down-Cv4fRrLl.js";import{C as ne}from"./check-CplqzfRD.js";function Se(i){return{all:i=i||new Map,on:function(m,p){var _=i.get(m);_?_.push(p):i.set(m,[p])},off:function(m,p){var _=i.get(m);_&&(p?_.splice(_.indexOf(p)>>>0,1):i.set(m,[]))},emit:function(m,p){var _=i.get(m);_&&_.slice().map(function(V){V(p)}),(_=i.get("*"))&&_.slice().map(function(V){V(m,p)})}}}const Ce=Se(),Oe={class:"grid p-5"},Ee={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Ae={class:"grid grid-cols-2 gap-2"},Pe={class:"space-y-2"},je={class:"space-y-2"},Be={class:"date_received_date"},Te={class:"space-y-2"},Re={class:"space-y-2"},Fe={class:"grid grid-cols-1 gap-2"},Le={class:"space-y-2"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},ze={class:"space-y-2"},Ge={class:"space-y-2"},Me={class:"grid grid-cols-1 gap-2"},qe={class:"space-y-2"},He={class:"grid grid-cols-1 gap-2"},Je={class:"space-y-2"},Ie={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Ke={class:"space-y-2"},We={class:"space-y-2"},Xe={class:"ncca_end_user_div"},Ye={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Ze={class:"space-y-2 grid grid-cols-1 gap-2"},el={class:"space-y-2"},ll={class:"date_ready_div"},al={class:"space-y-2 grid grid-cols-2 gap-2"},tl={class:"space-y-2"},sl={class:"date_released_div"},ol={class:"space-y-2"},dl={class:"grid grid-cols-1 md:grid-cols-[50%_25%_25%] gap-2"},rl={class:"space-y-2"},nl={class:"office_concerned_div"},il={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},ul={class:"space-y-2"},cl={class:"space-y-2"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},_l={class:"space-y-2"},fl={key:0,class:"flex items-center justify-center space-x-4"},Al=he({__name:"SheetDawerAuth",props:{documentTypes:{type:Array,default:()=>[]},complexities:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},employees:{type:Array,default:()=>[]},rowData:{type:Object,default:()=>{}},open:{type:Boolean,default:!1}},setup(i){const m=i,p=xe(),_=w(null),V=Ve(j()),h=w(),x=w(),$=w(),R=new be("en-US",{dateStyle:"long"}),F=w(""),L=w(""),t=$e({date_received:null,time_received:"",document_type:null,title:"",control_number:"",complexity:null,other_details:"",person_claiming_or_remarks:"",authority_or_fund_source:"",ncca_end_user:null,office_concerned:null,date_ready:null,date_released:null,time_released:"",service_to_ncca:"",concerned_party_or_supplier:"",total_service_amount:0,NewEmployeeName:"",NewOfficeName:""});E(h,(d,a)=>{t.date_received=d?d.toString():null}),E(x,(d,a)=>{t.date_ready=d?d.toString():null}),E($,(d,a)=>{t.date_released=d?d.toString():null}),E(()=>p.props.flash?.success,d=>{_.value=d},{immediate:!0});const N=w(!1),U=w(!1),ie=M(()=>m.employees.find(d=>d.id===t.ncca_end_user));function ue(d){t.ncca_end_user=d===t.ncca_end_user?"":d,t.NewEmployeeName="",U.value=!1}function ce(){t.ncca_end_user=null,t.NewEmployeeName=F.value,U.value=!1}const me=M(()=>m.offices.find(d=>d.id===t.office_concerned));function _e(d){t.office_concerned=d===t.office_concerned?"":d,t.NewOfficeName="",N.value=!1}function fe(){t.office_concerned=null,t.NewOfficeName=L.value,N.value=!1}const pe=()=>{t.patch(de("document.update-document",m.rowData.id),{onSuccess:()=>{Ce.emit("refresh-all-documents")}})};function ve(){_.value=null;const d=m.rowData;console.log(q(d)),t.document_type=d.document_type_id,t.date_received=d.date_received,t.time_received=d.time_received,t.title=d.title,t.control_number=d.control_number,t.complexity=d.complexity_id,t.other_details=d.other_details,t.person_claiming_or_remarks=d.remarks,t.authority_or_fund_source=d.authority_or_fund_source,t.ncca_end_user=d.ncca_end_user_id,t.office_concerned=d.office_concerned_id,t.date_ready=d.date_ready,t.date_released=d.date_released,t.time_released=d.time_released,t.service_to_ncca=d.service_to_ncca??"",t.concerned_party_or_supplier=d.concerned_party_or_supplier??"",t.total_service_amount=d.total_service_amount??0}E(()=>m.rowData,d=>{d&&ve(),console.log(q(t.data()))},{deep:!0});const ye=(d=>{window.open(de("document.generateQr",d),"_blank")});return(d,a)=>(f(),k(e(ge),{class:"md:w-[55%] w-[95%] overflow-y-auto"},{default:s(()=>[l(e(we),null,{default:s(()=>[r("div",Oe,[_.value?(f(),k(e(Ne),{key:0,class:"bg-green-700 text-white"},{default:s(()=>[l(e(De)),l(e(Ue),null,{default:s(()=>[n(v(_.value),1)]),_:1})]),_:1})):H("",!0)]),l(e(ke),{class:"p-5 space-y-5"},{default:s(({errors:pl,processing:vl})=>[r("div",Ee,[r("div",Ae,[r("div",Pe,[r("div",je,[l(u,null,{default:s(()=>[...a[22]||(a[22]=[n("Date received",-1)])]),_:1}),r("div",Be,[l(e(S),{class:"w-full"},{default:s(({close:o})=>[l(e(C),{"as-child":""},{default:s(()=>[l(e(b),{variant:"outline",class:P(e(D)("w-full justify-start text-left font-normal",!h.value&&"text-muted-foreground"))},{default:s(()=>[l(e(Q)),n(" "+v(h.value?e(R).format(h.value.toDate(e(j)())):i.rowData.date_received?new Date(i.rowData.date_received).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(O),{class:"w-auto p-0",align:"start"},{default:s(()=>[l(e(z),{modelValue:h.value,"onUpdate:modelValue":[a[0]||(a[0]=y=>h.value=y),o],"default-placeholder":e(V),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(c,{message:e(t).errors.date_received},null,8,["message"])])]),r("div",Te,[l(u,null,{default:s(()=>[...a[23]||(a[23]=[n("Time received",-1)])]),_:1}),l(g,{type:"time",modelValue:e(t).time_received,"onUpdate:modelValue":a[1]||(a[1]=o=>e(t).time_received=o),id:"time_received",name:"time_received",placeholder:"enter time received here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.time_received},null,8,["message"])])]),r("div",Re,[l(u,null,{default:s(()=>[...a[24]||(a[24]=[n("Document type",-1)])]),_:1}),l(e(J),{modelValue:e(t).document_type,"onUpdate:modelValue":a[2]||(a[2]=o=>e(t).document_type=o)},{default:s(()=>[l(e(I),{class:"w-full"},{default:s(()=>[l(e(K),{placeholder:"Select a document type"})]),_:1}),l(e(W),null,{default:s(()=>[l(e(X),null,{default:s(()=>[(f(!0),A(T,null,B(i.documentTypes,o=>(f(),k(e(Y),{key:o.id,value:o.id},{default:s(()=>[n(v(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(c,{message:e(t).errors.document_type},null,8,["message"])])]),r("div",Fe,[r("div",Le,[l(u,null,{default:s(()=>[...a[25]||(a[25]=[n("Title",-1)])]),_:1}),l(g,{type:"text",modelValue:e(t).title,"onUpdate:modelValue":a[3]||(a[3]=o=>e(t).title=o),id:"title",name:"title",placeholder:"enter title here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.title},null,8,["message"])])]),r("div",Qe,[r("div",ze,[l(u,null,{default:s(()=>[...a[26]||(a[26]=[n("Control Number",-1)])]),_:1}),l(g,{type:"text",modelValue:e(t).control_number,"onUpdate:modelValue":a[4]||(a[4]=o=>e(t).control_number=o),id:"control_number",name:"control_number",placeholder:"enter control number here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.control_number},null,8,["message"])]),r("div",Ge,[l(u,null,{default:s(()=>[...a[27]||(a[27]=[n("Simple/Complex",-1)])]),_:1}),l(e(J),{modelValue:e(t).complexity,"onUpdate:modelValue":a[5]||(a[5]=o=>e(t).complexity=o)},{default:s(()=>[l(e(I),{class:"w-full"},{default:s(()=>[l(e(K),{placeholder:"Select a complexity"})]),_:1}),l(e(W),null,{default:s(()=>[l(e(X),null,{default:s(()=>[(f(!0),A(T,null,B(i.complexities,o=>(f(),k(e(Y),{key:o.id,value:o.id},{default:s(()=>[n(v(o.codevalue),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(c,{message:e(t).errors.complexity},null,8,["message"])])]),r("div",Me,[r("div",qe,[l(u,null,{default:s(()=>[...a[28]||(a[28]=[n("Other details",-1)])]),_:1}),l(G,{modelValue:e(t).other_details,"onUpdate:modelValue":a[6]||(a[6]=o=>e(t).other_details=o),id:"other_details",name:"other_details",rows:"2",placeholder:"enter other details here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.other_details},null,8,["message"])])]),r("div",He,[r("div",Je,[l(u,null,{default:s(()=>[...a[29]||(a[29]=[n("Person claiming/Remarks",-1)])]),_:1}),l(G,{modelValue:e(t).person_claiming_or_remarks,"onUpdate:modelValue":a[7]||(a[7]=o=>e(t).person_claiming_or_remarks=o),id:"person_claiming_or_remarks",name:"person_claiming_or_remarks",rows:"2",placeholder:"enter remarks here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.person_claiming_or_remarks},null,8,["message"])])]),r("div",Ie,[r("div",Ke,[l(u,null,{default:s(()=>[...a[30]||(a[30]=[n("Authority/Fund Source",-1)])]),_:1}),l(g,{type:"text",modelValue:e(t).authority_or_fund_source,"onUpdate:modelValue":a[8]||(a[8]=o=>e(t).authority_or_fund_source=o),id:"authority_or_fund_source",name:"authority_or_fund_source",placeholder:"enter authority or fund source here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.authority_or_fund_source},null,8,["message"])]),r("div",We,[l(u,null,{default:s(()=>[...a[31]||(a[31]=[n("NCCA End User",-1)])]),_:1}),r("div",Xe,[l(e(S),{open:U.value,"onUpdate:open":a[11]||(a[11]=o=>U.value=o)},{default:s(()=>[l(e(C),{"as-child":""},{default:s(()=>[l(e(b),{variant:"outline",role:"combobox","aria-expanded":U.value,class:"w-full justify-between"},{default:s(()=>[n(v(ie.value?.name||(e(t).NewEmployeeName?e(t).NewEmployeeName:"Employee..."))+" ",1),l(e(re),{class:"opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),l(e(O),{class:"w-full p-0"},{default:s(()=>[l(e(Z),null,{default:s(()=>[l(e(ee),{class:"h-9 border border-gray-300 rounded-lg p-4",placeholder:"Search employee...",modelValue:F.value,"onUpdate:modelValue":a[9]||(a[9]=o=>F.value=o)},null,8,["modelValue"]),l(e(le),null,{default:s(()=>[l(e(ae),{class:"pr-2 pl-2"},{default:s(()=>[l(oe,{onClick:ce,class:"bg-blue-500 w-full hover:cursor-pointer hover:bg-blue-800"},{default:s(()=>[...a[32]||(a[32]=[n(" Add this to the list ",-1)])]),_:1})]),_:1}),l(e(te),{class:"bg-gray-300"},{default:s(()=>[(f(!0),A(T,null,B(m.employees,o=>(f(),k(e(se),{class:"hover:cursor-pointer hover:bg-gray-200",key:o.id,value:o.id,onSelect:a[10]||(a[10]=y=>{ue(y.detail.value)})},{default:s(()=>[n(v(o.name)+" ",1),l(e(ne),{class:P(e(D)("ml-auto",e(t).ncca_end_user===o.id?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),l(c,{message:e(t).errors.ncca_end_user},null,8,["message"])])]),r("div",Ye,[r("div",Ze,[r("div",el,[l(u,null,{default:s(()=>[...a[33]||(a[33]=[n("Date ready",-1)])]),_:1}),r("div",ll,[l(e(S),{class:"w-full"},{default:s(({close:o})=>[l(e(C),{"as-child":""},{default:s(()=>[l(e(b),{variant:"outline",class:P(e(D)("w-full justify-start text-left font-normal",!x.value&&"text-muted-foreground"))},{default:s(()=>[l(e(Q)),n(" "+v(x.value?e(R).format(x.value.toDate(e(j)())):i.rowData.date_ready?new Date(i.rowData.date_ready).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(O),{class:"w-auto p-0",align:"start"},{default:s(()=>[l(e(z),{modelValue:x.value,"onUpdate:modelValue":[a[12]||(a[12]=y=>x.value=y),o],"default-placeholder":e(V),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(c,{message:e(t).errors.date_ready},null,8,["message"])])]),r("div",al,[r("div",tl,[l(u,null,{default:s(()=>[...a[34]||(a[34]=[n("Date released",-1)])]),_:1}),r("div",sl,[l(e(S),{class:"w-full"},{default:s(({close:o})=>[l(e(C),{"as-child":""},{default:s(()=>[l(e(b),{variant:"outline",class:P(e(D)("w-full justify-start text-left font-normal",!$.value&&"text-muted-foreground"))},{default:s(()=>[l(e(Q)),n(" "+v($.value?e(R).format($.value.toDate(e(j)())):i.rowData.date_released?new Date(i.rowData.date_released).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(O),{class:"w-auto p-0",align:"start"},{default:s(()=>[l(e(z),{modelValue:$.value,"onUpdate:modelValue":[a[13]||(a[13]=y=>$.value=y),o],"default-placeholder":e(V),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(c,{message:e(t).errors.date_released},null,8,["message"])]),r("div",ol,[l(u,null,{default:s(()=>[...a[35]||(a[35]=[n("Time released",-1)])]),_:1}),l(g,{modelValue:e(t).time_released,"onUpdate:modelValue":a[14]||(a[14]=o=>e(t).time_released=o),type:"time",id:"time_released",name:"time_released",placeholder:"Pick a time"},null,8,["modelValue"]),l(c,{message:e(t).errors.time_released},null,8,["message"])])])]),r("div",dl,[r("div",rl,[l(u,null,{default:s(()=>[...a[36]||(a[36]=[n("Office Concerned",-1)])]),_:1}),r("div",nl,[l(e(S),{open:N.value,"onUpdate:open":a[17]||(a[17]=o=>N.value=o)},{default:s(()=>[l(e(C),{"as-child":""},{default:s(()=>[l(e(b),{variant:"outline",role:"combobox","aria-expanded":N.value,class:"w-full justify-between"},{default:s(()=>[n(v(me.value?.name||(e(t).NewOfficeName?e(t).NewOfficeName:"Office..."))+" ",1),l(e(re),{class:"opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),l(e(O),{class:"w-full p-0"},{default:s(()=>[l(e(Z),null,{default:s(()=>[l(e(ee),{class:"h-9",placeholder:"Search office...",modelValue:L.value,"onUpdate:modelValue":a[15]||(a[15]=o=>L.value=o)},null,8,["modelValue"]),l(e(le),null,{default:s(()=>[l(e(ae),null,{default:s(()=>[l(oe,{onClick:fe,class:"bg-blue-500 w-full hover:cursor-pointer hover:bg-blue-800"},{default:s(()=>[...a[37]||(a[37]=[n(" Add this to the list ",-1)])]),_:1})]),_:1}),l(e(te),null,{default:s(()=>[(f(!0),A(T,null,B(m.offices,o=>(f(),k(e(se),{key:o.id,value:o.id,onSelect:a[16]||(a[16]=y=>{_e(y.detail.value)})},{default:s(()=>[n(v(o.name)+" ",1),l(e(ne),{class:P(e(D)("ml-auto",e(t).office_concerned===o.id?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),l(c,{message:e(t).errors.office_concerned},null,8,["message"])])]),r("div",il,[r("div",ul,[l(u,null,{default:s(()=>[...a[38]||(a[38]=[n("Service to NCCA",-1)])]),_:1}),l(g,{type:"text",modelValue:e(t).service_to_ncca,"onUpdate:modelValue":a[18]||(a[18]=o=>e(t).service_to_ncca=o),id:"service_to_ncca",name:"service_to_ncca",placeholder:"enter service to ncca here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.service_to_ncca},null,8,["message"])]),r("div",cl,[l(u,null,{default:s(()=>[...a[39]||(a[39]=[n("Concerned Party/Supplier",-1)])]),_:1}),l(g,{type:"text",modelValue:e(t).concerned_party_or_supplier,"onUpdate:modelValue":a[19]||(a[19]=o=>e(t).concerned_party_or_supplier=o),id:"concerned_party_or_supplier",name:"concerned_party_or_supplier",placeholder:"enter concerned party or supplier here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.concerned_party_or_supplier},null,8,["message"])])]),r("div",ml,[r("div",_l,[l(u,null,{default:s(()=>[...a[40]||(a[40]=[n("Total Service Amount (Php.)",-1)])]),_:1}),l(g,{type:"number",modelValue:e(t).total_service_amount,"onUpdate:modelValue":a[20]||(a[20]=o=>e(t).total_service_amount=o),id:"total_service_amount",name:"total_service_amount",placeholder:"enter total service amount here...."},null,8,["modelValue"]),l(c,{message:e(t).errors.total_service_amount},null,8,["message"])])]),d.$page.props.auth.user?(f(),A("div",fl,[l(e(b),{type:"button",onClick:pe,class:"cursor-pointer"},{default:s(()=>[...a[41]||(a[41]=[n("Submit",-1)])]),_:1}),l(e(b),{type:"button",onClick:a[21]||(a[21]=o=>ye(i.rowData.id)),class:"cursor-pointer"},{default:s(()=>[...a[42]||(a[42]=[n("Generate QR",-1)])]),_:1})])):H("",!0)]),_:1})]),_:1})]),_:1}))}});export{Al as _,Ce as e};
