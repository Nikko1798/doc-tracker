import{_ as pe,a as ve,b as ye}from"./SheetHeader.vue_vue_type_script_setup_true_lang-CM7KnO7Y.js";import{c as N}from"./index-DVfQ5S1Y.js";import{D as ge}from"./DialogTrigger-tGuMR3qn.js";import{d as re,f as g,u as e,v as we,w as s,g as he,o as _,B as Ve,r as v,y as be,J as O,i as M,a as l,e as n,b as d,k as $e,z as m,x as xe,H as S,c as E,F as P,G as A,K as ke}from"./app-mI0qlyDT.js";import{$ as Ne,a as j,b as Se,_ as D,c as U,C as q,d as C,e as z,f as H,g as I,h as G,i as J,j as K,k as Q,l as W,m as X,n as Y,o as Z,p as ee,q as le,r as ae}from"./index-D_omLWyy.js";import{_ as y}from"./Button.vue_vue_type_script_setup_true_lang-D4V9jL43.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-C5jv-mES.js";import{_ as u}from"./Label.vue_vue_type_script_setup_true_lang-i5YncdhP.js";import{_ as De,a as Ue}from"./index-CE3h8fn-.js";import{_ as te}from"./Badge.vue_vue_type_script_setup_true_lang-Bm1nRTRs.js";import{_ as i}from"./InputError.vue_vue_type_script_setup_true_lang-DNOuZYv5.js";import{s as Ce}from"./index-ikzcNs2d.js";import{e as Oe}from"./mitt-CGRXT3Tn.js";import{c as Ee}from"./createLucideIcon-Bm6eGYnl.js";import{C as Pe}from"./check-check-Ds_GSWfY.js";import{C as se}from"./chevrons-up-down-kraxAvF2.js";import{C as oe}from"./check-D7W1ub8_.js";const Ae=Ee("SquarePenIcon",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),je=re({__name:"SheetTrigger",props:{asChild:{type:Boolean},as:{}},setup(c){const p=c;return(B,$)=>(_(),g(e(ge),we({"data-slot":"sheet-trigger"},p),{default:s(()=>[he(B.$slots,"default")]),_:3},16))}}),Be={class:"grid p-5"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Fe={class:"space-y-2"},Le={class:"space-y-2"},Re={class:"date_received_date"},qe={class:"space-y-2"},ze={class:"grid grid-cols-1 gap-2"},Me={class:"space-y-2"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Ie={class:"space-y-2"},Ge={class:"space-y-2"},Je={class:"grid grid-cols-1 gap-2"},Ke={class:"space-y-2"},Qe={class:"grid grid-cols-1 gap-2"},We={class:"space-y-2"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},Ye={class:"space-y-2"},Ze={class:"space-y-2"},el={class:"ncca_end_user_div"},ll={class:"grid grid-cols-1 md:grid-cols-[50%_25%_25%] gap-2"},al={class:"space-y-2"},tl={class:"office_concerned_div"},sl={class:"space-y-2"},ol={class:"space-y-2"},rl={class:"date_received_div"},dl={class:"space-y-2"},nl={class:"space-y-2"},ul={class:"date_released_div"},il={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},cl={class:"space-y-2"},_l={class:"space-y-2"},ml={class:"grid grid-cols-1 md:grid-cols-2 gap-2"},fl={class:"space-y-2"},pl={class:"flex items-center justify-center"},jl=re({__name:"documentDrawerForm",props:{documentTypes:{type:Array,default:()=>[]},complexities:{type:Array,default:()=>[]},offices:{type:Array,default:()=>[]},employees:{type:Array,default:()=>[]},rowData:{type:Object,default:()=>{}}},setup(c){const p=c,B=Ve(),$=v(null),T=Ne(j()),w=v(),h=v(),V=v(),F=new Se("en-US",{dateStyle:"long"}),L=v(""),R=v(""),t=be({date_received:null,document_type:null,title:"",control_number:"",complexity:null,other_details:"",person_claiming_or_remarks:"",authority_or_fund_source:"",ncca_end_user:null,office_concerned:null,date_ready:null,date_released:null,service_to_ncca:"",concerned_party_or_supplier:"",total_service_amount:0,NewEmployeeName:"",NewOfficeName:""});O(w,(r,a)=>{t.date_received=r?r.toString():null}),O(h,(r,a)=>{t.date_ready=r?r.toString():null}),O(V,(r,a)=>{t.date_released=r?r.toString():null}),O(()=>B.props.flash?.success,r=>{$.value=r},{immediate:!0});const x=v(!1),k=v(!1),de=M(()=>p.employees.find(r=>r.id===t.ncca_end_user));function ne(r){t.ncca_end_user=r===t.ncca_end_user?"":r,t.NewEmployeeName="",k.value=!1}function ue(){t.ncca_end_user=null,t.NewEmployeeName=L.value,k.value=!1}const ie=M(()=>p.offices.find(r=>r.id===t.office_concerned));function ce(r){t.office_concerned=r===t.office_concerned?"":r,t.NewOfficeName="",x.value=!1}function _e(){t.office_concerned=null,t.NewOfficeName=R.value,x.value=!1}const me=()=>{t.patch(Ce("document.update-document",p.rowData.id),{onSuccess:()=>{Oe.emit("refresh-all-documents")}})};function fe(){$.value=null;const r=p.rowData;console.log(ke(r.document_type)),t.document_type=r.document_type_id,t.date_received=r.date_received,t.title=r.title,t.control_number=r.control_number,t.complexity=r.complexity_id,t.other_details=r.other_details,t.person_claiming_or_remarks=r.remarks,t.authority_or_fund_source=r.authority_or_fund_source,t.ncca_end_user=r.ncca_end_user_id,t.office_concerned=r.office_concerned_id,t.date_ready=r.date_ready,t.date_released=r.date_released,t.service_to_ncca=r.service_to_ncca??"",t.concerned_party_or_supplier=r.concerned_party_or_supplier??"",t.total_service_amount=r.total_service_amount??0}return(r,a)=>(_(),g(e(ye),null,{default:s(()=>[l(e(je),{onClick:fe},{default:s(()=>[l(e(y),{class:"bg-blue-500 hover:bg-blue-800 hover:cursor-pointer"},{default:s(()=>[l(e(Ae)),a[19]||(a[19]=n(" Update",-1))]),_:1})]),_:1}),l(e(pe),{class:"md:w-[45%] w-[95%] overflow-y-auto"},{default:s(()=>[l(e(ve),null,{default:s(()=>[d("div",Be,[$.value?(_(),g(e(De),{key:0,class:"bg-green-700 text-white"},{default:s(()=>[l(e(Pe)),l(e(Ue),null,{default:s(()=>[n(m($.value),1)]),_:1})]),_:1})):$e("",!0)]),l(e(xe),{class:"p-5 space-y-5"},{default:s(({errors:vl,processing:yl})=>[d("div",Te,[d("div",Fe,[d("div",Le,[l(u,null,{default:s(()=>[...a[20]||(a[20]=[n("Date received",-1)])]),_:1}),d("div",Re,[l(e(D),{class:"w-full"},{default:s(({close:o})=>[l(e(U),{"as-child":""},{default:s(()=>[l(e(y),{variant:"outline",class:S(e(N)("w-full justify-start text-left font-normal",!w.value&&"text-muted-foreground"))},{default:s(()=>[l(e(q)),n(" "+m(w.value?e(F).format(w.value.toDate(e(j)())):c.rowData.date_received?new Date(c.rowData.date_received).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(C),{class:"w-auto p-0",align:"start"},{default:s(()=>[l(e(z),{modelValue:w.value,"onUpdate:modelValue":[a[0]||(a[0]=f=>w.value=f),o],"default-placeholder":e(T),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(i,{message:e(t).errors.date_received},null,8,["message"])])]),d("div",qe,[l(u,null,{default:s(()=>[...a[21]||(a[21]=[n("Document type",-1)])]),_:1}),l(e(H),{modelValue:e(t).document_type,"onUpdate:modelValue":a[1]||(a[1]=o=>e(t).document_type=o)},{default:s(()=>[l(e(I),{class:"w-full"},{default:s(()=>[l(e(G),{placeholder:"Select a document type"})]),_:1}),l(e(J),null,{default:s(()=>[l(e(K),null,{default:s(()=>[(_(!0),E(P,null,A(c.documentTypes,o=>(_(),g(e(le),{key:o.id,value:o.id},{default:s(()=>[n(m(o.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(i,{message:e(t).errors.document_type},null,8,["message"])])]),d("div",ze,[d("div",Me,[l(u,null,{default:s(()=>[...a[22]||(a[22]=[n("Title",-1)])]),_:1}),l(b,{type:"text",modelValue:e(t).title,"onUpdate:modelValue":a[2]||(a[2]=o=>e(t).title=o),id:"title",name:"title",placeholder:"enter title here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.title},null,8,["message"])])]),d("div",He,[d("div",Ie,[l(u,null,{default:s(()=>[...a[23]||(a[23]=[n("Control Number",-1)])]),_:1}),l(b,{type:"text",modelValue:e(t).control_number,"onUpdate:modelValue":a[3]||(a[3]=o=>e(t).control_number=o),id:"control_number",name:"control_number",placeholder:"enter control number here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.control_number},null,8,["message"])]),d("div",Ge,[l(u,null,{default:s(()=>[...a[24]||(a[24]=[n("Simple/Complex",-1)])]),_:1}),l(e(H),{modelValue:e(t).complexity,"onUpdate:modelValue":a[4]||(a[4]=o=>e(t).complexity=o)},{default:s(()=>[l(e(I),{class:"w-full"},{default:s(()=>[l(e(G),{placeholder:"Select a complexity"})]),_:1}),l(e(J),null,{default:s(()=>[l(e(K),null,{default:s(()=>[(_(!0),E(P,null,A(c.complexities,o=>(_(),g(e(le),{key:o.id,value:o.id},{default:s(()=>[n(m(o.codevalue),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]),l(i,{message:e(t).errors.complexity},null,8,["message"])])]),d("div",Je,[d("div",Ke,[l(u,null,{default:s(()=>[...a[25]||(a[25]=[n("Other details",-1)])]),_:1}),l(Q,{modelValue:e(t).other_details,"onUpdate:modelValue":a[5]||(a[5]=o=>e(t).other_details=o),id:"other_details",name:"other_details",rows:"2",placeholder:"enter other details here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.other_details},null,8,["message"])])]),d("div",Qe,[d("div",We,[l(u,null,{default:s(()=>[...a[26]||(a[26]=[n("Person claiming/Remarks",-1)])]),_:1}),l(Q,{modelValue:e(t).person_claiming_or_remarks,"onUpdate:modelValue":a[6]||(a[6]=o=>e(t).person_claiming_or_remarks=o),id:"person_claiming_or_remarks",name:"person_claiming_or_remarks",rows:"2",placeholder:"enter remarks here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.person_claiming_or_remarks},null,8,["message"])])]),d("div",Xe,[d("div",Ye,[l(u,null,{default:s(()=>[...a[27]||(a[27]=[n("Authority/Fund Source",-1)])]),_:1}),l(b,{type:"text",modelValue:e(t).authority_or_fund_source,"onUpdate:modelValue":a[7]||(a[7]=o=>e(t).authority_or_fund_source=o),id:"authority_or_fund_source",name:"authority_or_fund_source",placeholder:"enter authority or fund source here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.authority_or_fund_source},null,8,["message"])]),d("div",Ze,[l(u,null,{default:s(()=>[...a[28]||(a[28]=[n("NCCA End User",-1)])]),_:1}),d("div",el,[l(e(D),{open:k.value,"onUpdate:open":a[10]||(a[10]=o=>k.value=o)},{default:s(()=>[l(e(U),{"as-child":""},{default:s(()=>[l(e(y),{variant:"outline",role:"combobox","aria-expanded":k.value,class:"w-full justify-between"},{default:s(()=>[n(m(de.value?.name||(e(t).NewEmployeeName?e(t).NewEmployeeName:"Employee..."))+" ",1),l(e(se),{class:"opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),l(e(C),{class:"w-full p-0"},{default:s(()=>[l(e(W),null,{default:s(()=>[l(e(X),{class:"h-9 border border-gray-300 rounded-lg p-4",placeholder:"Search employee...",modelValue:L.value,"onUpdate:modelValue":a[8]||(a[8]=o=>L.value=o)},null,8,["modelValue"]),l(e(Y),null,{default:s(()=>[l(e(Z),{class:"pr-2 pl-2"},{default:s(()=>[l(te,{onClick:ue,class:"bg-blue-500 w-full hover:cursor-pointer hover:bg-blue-800"},{default:s(()=>[...a[29]||(a[29]=[n(" Add this to the list ",-1)])]),_:1})]),_:1}),l(e(ee),{class:"bg-gray-300"},{default:s(()=>[(_(!0),E(P,null,A(p.employees,o=>(_(),g(e(ae),{class:"hover:cursor-pointer hover:bg-gray-200",key:o.id,value:o.id,onSelect:a[9]||(a[9]=f=>{ne(f.detail.value)})},{default:s(()=>[n(m(o.name)+" ",1),l(e(oe),{class:S(e(N)("ml-auto",e(t).ncca_end_user===o.id?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),l(i,{message:e(t).errors.ncca_end_user},null,8,["message"])])]),d("div",ll,[d("div",al,[l(u,null,{default:s(()=>[...a[30]||(a[30]=[n("Office Concerned",-1)])]),_:1}),d("div",tl,[l(e(D),{open:x.value,"onUpdate:open":a[13]||(a[13]=o=>x.value=o)},{default:s(()=>[l(e(U),{"as-child":""},{default:s(()=>[l(e(y),{variant:"outline",role:"combobox","aria-expanded":x.value,class:"w-full justify-between"},{default:s(()=>[n(m(ie.value?.name||(e(t).NewOfficeName?e(t).NewOfficeName:"Office..."))+" ",1),l(e(se),{class:"opacity-50"})]),_:1},8,["aria-expanded"])]),_:1}),l(e(C),{class:"w-full p-0"},{default:s(()=>[l(e(W),null,{default:s(()=>[l(e(X),{class:"h-9",placeholder:"Search office...",modelValue:R.value,"onUpdate:modelValue":a[11]||(a[11]=o=>R.value=o)},null,8,["modelValue"]),l(e(Y),null,{default:s(()=>[l(e(Z),null,{default:s(()=>[l(te,{onClick:_e,class:"bg-blue-500 w-full hover:cursor-pointer hover:bg-blue-800"},{default:s(()=>[...a[31]||(a[31]=[n(" Add this to the list ",-1)])]),_:1})]),_:1}),l(e(ee),null,{default:s(()=>[(_(!0),E(P,null,A(p.offices,o=>(_(),g(e(ae),{key:o.id,value:o.id,onSelect:a[12]||(a[12]=f=>{ce(f.detail.value)})},{default:s(()=>[n(m(o.name)+" ",1),l(e(oe),{class:S(e(N)("ml-auto",e(t).office_concerned===o.id?"opacity-100":"opacity-0"))},null,8,["class"])]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])]),l(i,{message:e(t).errors.office_concerned},null,8,["message"])]),d("div",sl,[d("div",ol,[l(u,null,{default:s(()=>[...a[32]||(a[32]=[n("Date ready",-1)])]),_:1}),d("div",rl,[l(e(D),{class:"w-full"},{default:s(({close:o})=>[l(e(U),{"as-child":""},{default:s(()=>[l(e(y),{variant:"outline",class:S(e(N)("w-full justify-start text-left font-normal",!h.value&&"text-muted-foreground"))},{default:s(()=>[l(e(q)),n(" "+m(h.value?e(F).format(h.value.toDate(e(j)())):c.rowData.date_time_ready?new Date(c.rowData.date_time_ready).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(C),{class:"w-auto p-0",align:"start"},{default:s(()=>[l(e(z),{modelValue:h.value,"onUpdate:modelValue":[a[14]||(a[14]=f=>h.value=f),o],"default-placeholder":e(T),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(i,{message:e(t).errors.date_received},null,8,["message"])])]),d("div",dl,[d("div",nl,[l(u,null,{default:s(()=>[...a[33]||(a[33]=[n("Date released",-1)])]),_:1}),d("div",ul,[l(e(D),{class:"w-full"},{default:s(({close:o})=>[l(e(U),{"as-child":""},{default:s(()=>[l(e(y),{variant:"outline",class:S(e(N)("w-full justify-start text-left font-normal",!V.value&&"text-muted-foreground"))},{default:s(()=>[l(e(q)),n(" "+m(V.value?e(F).format(V.value.toDate(e(j)())):c.rowData.date_time_released?new Date(c.rowData.date_time_released).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Pick a date"),1)]),_:1},8,["class"])]),_:1}),l(e(C),{class:"w-auto p-0",align:"start"},{default:s(()=>[l(e(z),{modelValue:V.value,"onUpdate:modelValue":[a[15]||(a[15]=f=>V.value=f),o],"default-placeholder":e(T),layout:"month-and-year","initial-focus":""},null,8,["modelValue","default-placeholder","onUpdate:modelValue"])]),_:2},1024)]),_:1})]),l(i,{message:e(t).errors.date_released},null,8,["message"])])])]),d("div",il,[d("div",cl,[l(u,null,{default:s(()=>[...a[34]||(a[34]=[n("Service to NCCA",-1)])]),_:1}),l(b,{type:"text",modelValue:e(t).service_to_ncca,"onUpdate:modelValue":a[16]||(a[16]=o=>e(t).service_to_ncca=o),id:"service_to_ncca",name:"service_to_ncca",placeholder:"enter service to ncca here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.service_to_ncca},null,8,["message"])]),d("div",_l,[l(u,null,{default:s(()=>[...a[35]||(a[35]=[n("Concerned Party/Supplier",-1)])]),_:1}),l(b,{type:"text",modelValue:e(t).concerned_party_or_supplier,"onUpdate:modelValue":a[17]||(a[17]=o=>e(t).concerned_party_or_supplier=o),id:"concerned_party_or_supplier",name:"concerned_party_or_supplier",placeholder:"enter concerned party or supplier here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.concerned_party_or_supplier},null,8,["message"])])]),d("div",ml,[d("div",fl,[l(u,null,{default:s(()=>[...a[36]||(a[36]=[n("Total Service Amount (Php.)",-1)])]),_:1}),l(b,{type:"number",modelValue:e(t).total_service_amount,"onUpdate:modelValue":a[18]||(a[18]=o=>e(t).total_service_amount=o),id:"total_service_amount",name:"total_service_amount",placeholder:"enter total service amount here...."},null,8,["modelValue"]),l(i,{message:e(t).errors.total_service_amount},null,8,["message"])])]),d("div",pl,[l(e(y),{type:"button",onClick:me,class:"cursor-pointer"},{default:s(()=>[...a[37]||(a[37]=[n("Submit",-1)])]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1}))}});export{jl as _};
